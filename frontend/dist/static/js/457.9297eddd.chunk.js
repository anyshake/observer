"use strict";(self.webpackChunkg_observer=self.webpackChunkg_observer||[]).push([[457],{5608:function(e,t,a){a.d(t,{Z:function(){return l}});var n=a(5671),r=a(3144),s=a(136),i=a(7277),c=a(7313),o=a(6417),l=function(e){(0,s.Z)(a,e);var t=(0,i.Z)(a);function a(){return(0,n.Z)(this,a),t.apply(this,arguments)}return(0,r.Z)(a,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.label,n=e.text;return(0,o.jsxs)("div",{className:"mb-4 bg-white flex flex-col rounded-xl text-gray-700 shadow-lg",children:[(0,o.jsx)("div",{className:"mx-4 rounded-lg overflow-hidden shadow-lg",children:t}),(0,o.jsxs)("div",{className:"p-4",children:[(0,o.jsx)("h6",{className:"text-md font-bold text-gray-800",children:a}),(0,o.jsx)("span",{className:"text-md",children:n.split("\n").map((function(e,t){return(0,o.jsx)("p",{children:e},t)}))})]})]})}}]),a}(c.Component)},318:function(e,t,a){a.d(t,{Z:function(){return f}});var n=a(5671),r=a(3144),s=a(136),i=a(7277),c=a(7313);var o=a.p+"static/media/rss-solid.167813b1d681372ed1d98e45b6b6c0f7.svg";var l=a.p+"static/media/link-solid.49819f951200a220d9839699fbccd8de.svg";var d=a.p+"static/media/link-slash-solid.7893b9a51ad07ceedeb88c9649c58439.svg",u=a(6417),f=function(e){(0,s.Z)(a,e);var t=(0,i.Z)(a);function a(){return(0,n.Z)(this,a),t.apply(this,arguments)}return(0,r.Z)(a,[{key:"render",value:function(){var e=this.props,t=e.type,a=e.label,n=e.text,r=d,s="";switch(t){case"success":r=o,s="from-green-400 to-blue-500";break;case"warning":r=l,s="from-orange-400 to-orange-600";break;case"error":r=d,s="from-red-400 to-red-600"}return(0,u.jsx)("div",{className:"my-2 shadow-xl p-6 text-sm text-white rounded-lg bg-gradient-to-r ".concat(s),children:(0,u.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,u.jsxs)("div",{className:"flex gap-2 font-bold text-lg",children:[(0,u.jsx)("img",{className:"w-6 h-6",src:r,alt:""}),(0,u.jsx)("span",{children:a})]}),(0,u.jsx)("span",{className:"pl-3 text-md font-medium",children:n.split("\n").map((function(e,t){return(0,u.jsx)("p",{children:e},t)}))})]})})}}]),a}(c.Component)},6694:function(e,t,a){var n=a(3433);t.Z=function(e,t,a){if(t.some((function(e){return e instanceof Array})))for(var r=0;r<t.length;r++)e.push(t[r]);else e.push(t);return e.length>a&&e.splice(0,e.length-a),(0,n.Z)(e)}},217:function(e,t,a){a.r(t),a.d(t,{default:function(){return M}});var n=a(1413),r=a(4165),s=a(5861),i=a(5671),c=a(3144),o=a(136),l=a(7277),d=a(7313),u=a(4791),f=a(4066),h=a(5097),m=a(501),p=a(318),x=a(6417),v=function(e){(0,o.Z)(a,e);var t=(0,l.Z)(a);function a(){return(0,i.Z)(this,a),t.apply(this,arguments)}return(0,c.Z)(a,[{key:"render",value:function(){var e=this.props.list;return(0,x.jsx)("div",{className:"flex flex-wrap",children:e.map((function(e,t){var a=e.icon,n=e.label,r=e.value,s=e.unit;return(0,x.jsx)("div",{className:"w-full md:w-1/2 lg:w-1/3 p-2",children:(0,x.jsxs)("div",{className:"flex flex-row bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 rounded-md p-4 shadow-xl",children:[(0,x.jsx)("img",{className:"bg-white p-2 rounded-md w-8 h-8 md:w-12 md:h-12 self-center",src:a,alt:""}),(0,x.jsxs)("div",{className:"flex flex-col flex-grow ml-5 text-white",children:[(0,x.jsx)("div",{className:"text-sm whitespace-nowrap",children:n}),(0,x.jsxs)("div",{className:"text-md",children:[r,(0,x.jsx)("span",{className:"text-lg px-2",children:s})]})]})]})},t)}))})}}]),a}(d.Component),g=a(4656),Z=a(5608),b=a(3676),j=a(1109),y=a(771),w=a(4580),k=a(8153),N=a(9062),C=(a(3331),a(7248)),z=a.n(C);var D=a.p+"static/media/location-dot-solid.763794361437464c10451de38cd290f7.svg",F=function(e){(0,o.Z)(a,e);var t=(0,l.Z)(a);function a(){return(0,i.Z)(this,a),t.apply(this,arguments)}return(0,c.Z)(a,[{key:"render",value:function(){var e=this.props,t=e.className,a=e.minZoom,n=e.maxZoom,r=e.center,s=e.zoom,i=e.tile,c=e.marker,o=new(z().Icon)({iconUrl:D,iconAnchor:[13,28],iconSize:[18,25]});return(0,x.jsxs)(w.h,{className:"z-0 w-full ".concat(t),attributionControl:!1,scrollWheelZoom:!1,zoomControl:!0,maxZoom:n,minZoom:a,center:r,zoom:s,style:{cursor:"default"},children:[(0,x.jsx)(k.I,{url:i}),c&&(0,x.jsx)(N.J,{position:c,icon:o})]})}}]),a}(d.Component),U=a(284);var A=a.p+"static/media/circle-check-solid.3fb46b8931cbbf9f966175f42b55a087.svg";var S=a.p+"static/media/bug-solid.7f781f9ddd35c29f11111e36602dcc87.svg";var I=a.p+"static/media/paper-plane-solid.e1f40db20eab51657c5490a69c103292.svg";var W=a.p+"static/media/circle-xmark-solid.ea0857c87457d25b161c3a37ad4e3845.svg";var q=a.p+"static/media/hourglass-half-solid.1e8dc3284939ca52c0fd542da1fbf89b.svg";var P=a.p+"static/media/clock-solid.23025348eaec720a2439930b37d677ee.svg",_=a(7596),E=a(4477),J=function(e){(0,o.Z)(a,e);var t=(0,l.Z)(a);function a(){return(0,i.Z)(this,a),t.apply(this,arguments)}return(0,c.Z)(a,[{key:"render",value:function(){var e=this.props,t=e.tag,a=e.timer,n=e.onData,r=e.onError,s=e.onFetch,i=e.children,c=e.retry,o=Array.isArray(i)?i:[i];return(0,x.jsx)(E.Z,{url:t,interval:a,promise:s,retryCount:c,onSuccess:n,onFailure:r,render:function(){return o}})}}]),a}(d.Component),T=function(e){var t=e.error,a=e.message,n=e.data,r=n.uuid,s=n.station,i=n.uptime,c=n.os,o="\u8fde\u63a5\u5931\u8d25",l="\u65e0\u6cd5\u8fde\u63a5\u5230\u670d\u52a1\u5668\uff0c\u8bf7\u5c1d\u8bd5\u5237\u65b0\u9875\u9762\u6216\u66f4\u6362\u7f51\u7edc";return t||(o="\u8fde\u63a5\u6210\u529f\uff1a".concat(s),l="".concat(a,"\n\n                \u670d\u52a1\u5668\u5728\u7ebf\u65f6\u957f ").concat(i," \u79d2\n\n                \u670d\u52a1\u5668\u91c7\u7528\u67b6\u6784 ").concat(c.arch,"/").concat(c.os,"\n\n                UUID\uff1a").concat(r,"\n")),{type:t?"error":"success",label:o,text:l}},B=a(1880),G=function(e,t){for(var a=0,n=["messages","errors","pushed","failures","queued","offset"];a<n.length;a++){var r=n[a],s=t.data.status;(0,B.Z)(e,"list[tag:".concat(r,"]>value"),s[r])}return e},H=function(e,t){var a=t.data.location;return(0,n.Z)((0,n.Z)({},e),{},{area:(0,n.Z)((0,n.Z)({},e.area),{},{text:"\u6d4b\u7ad9\u7ecf\u5ea6\uff1a".concat(a.longitude," \xb0\n\n                \u6d4b\u7ad9\u7eac\u5ea6\uff1a").concat(a.latitude," \xb0\n\n                \u6d4b\u7ad9\u6d77\u62d4\uff1a").concat(a.altitude," m")}),instance:(0,n.Z)((0,n.Z)({},e.instance),{},{center:[a.latitude,a.longitude],marker:[a.latitude,a.longitude]})})},K=a(6694),L=function(e,t,a){for(var n=function(){var n,i,c=s[r],o=t.data[c].percent,l=[Date.now(),o],d=null===(n=e.find((function(e){return e.tag===c})))||void 0===n||null===(i=n.chart.series)||void 0===i?void 0:i.data,u=(0,K.Z)(d,l,a);(0,B.Z)(e,"[tag:".concat(c,"]>area>text"),"\u5f53\u524d\u5360\u7528\u7387\uff1a".concat(o.toFixed(2),"%")),(0,B.Z)(e,"[tag:".concat(c,"]>chart>series>data"),u)},r=0,s=["cpu","memory"];r<s.length;r++)n();return e},M=function(e){(0,o.Z)(a,e);var t=(0,l.Z)(a);function a(e){var n;return(0,i.Z)(this,a),(n=t.call(this,e)).handleFetch=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_.Z)({tag:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleData=function(e){var t=e.error;if(!e.data)return!1;var a=T(e);if(!t){var r=H(n.state.map,e),s=G(n.state.badges,e),i=L(n.state.areas,e,120);return n.setState({banner:a,badges:s,areas:i,map:r}),!0}return n.setState({banner:a}),!1},n.state={banner:{type:"warning",label:"\u6b63\u5728\u8fde\u63a5\u670d\u52a1\u5668",text:"\u8bf7\u7a0d\u7b49..."},badges:{list:[{tag:"messages",label:"\u5df2\u89e3\u7801\u8baf\u606f\u91cf",value:"0",unit:"\u6761",icon:A},{tag:"errors",label:"\u5e27\u9519\u8bef\u8baf\u606f\u91cf",value:"0",unit:"\u6761",icon:S},{tag:"pushed",label:"\u5df2\u63a8\u9001\u8baf\u606f\u91cf",value:"0",unit:"\u6761",icon:I},{tag:"failures",label:"\u63a8\u9001\u5931\u8d25\u8baf\u606f\u91cf",value:"0",unit:"\u6761",icon:W},{tag:"queued",label:"\u7b49\u5f85\u63a8\u9001\u8baf\u606f\u91cf",value:"0",unit:"\u6761",icon:q},{tag:"offset",label:"\u7cfb\u7edf\u65f6\u95f4\u504f\u79fb\u91cf",value:"0",unit:"\u79d2",icon:P}]},areas:[{tag:"cpu",area:{label:"CPU \u5360\u7528\u7387",text:"\u5f53\u524d\u5360\u7528\u7387\uff1a\u6b63\u5728\u83b7\u53d6\u4e2d"},chart:{backgroundColor:"#22c55e",lineWidth:5,height:250,series:{type:"line",color:"#fff",data:[]}}},{tag:"memory",area:{label:"CPU \u5360\u7528\u7387",text:"\u5f53\u524d\u5360\u7528\u7387\uff1a\u6b63\u5728\u83b7\u53d6\u4e2d"},chart:{backgroundColor:"#06b6d4",lineWidth:5,height:250,series:{type:"line",color:"#fff",data:[]}}}],map:{area:{label:"\u6d4b\u7ad9\u6240\u5728\u4f4d\u7f6e",text:"\u6b63\u5728\u52a0\u8f7d\u4f4d\u7f6e\u8d44\u8baf"},instance:{className:"h-[400px]",zoom:3,minZoom:3,maxZoom:7,flyTo:!0,marker:[0,0],center:[33,106],tile:"/tiles/{z}/{x}/{y}/tile.webp"}}},n}return(0,c.Z)(a,[{key:"render",value:function(){var e=this.state,t=e.banner,a=e.badges,r=e.areas,s=this.state.map,i=s.area,c=s.instance;return(0,x.jsxs)(g.Z,{children:[(0,x.jsx)(u.Z,{}),(0,x.jsx)(f.Z,{}),(0,x.jsxs)(m.Z,{children:[(0,x.jsx)(h.Z,{}),(0,x.jsxs)(J,{timer:1e3,tag:"station",onData:this.handleData,onFetch:this.handleFetch,children:[(0,x.jsx)(p.Z,(0,n.Z)({},t)),(0,x.jsx)(v,(0,n.Z)({},a)),(0,x.jsx)(j.Z,{layout:"grid",children:r.map((function(e,t){var a=e.area,r=e.chart;return(0,x.jsx)(Z.Z,(0,n.Z)((0,n.Z)({},a),{},{children:(0,x.jsx)(b.Z,(0,n.Z)({},r))}),t)}))}),(0,x.jsx)(j.Z,{layout:"none",children:(0,x.jsx)(Z.Z,{label:i.label,text:i.text,children:(0,x.jsx)(F,(0,n.Z)({},c))})})]})]}),(0,x.jsx)(U.Z,{}),(0,x.jsx)(y.Z,{})]})}}]),a}(d.Component)}}]);