(self.webpackChunksrc=self.webpackChunksrc||[]).push([[698,209,234,635],{9698:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return Station}});var _home_yuki_Devel_go_src_com_geophone_observer_frontend_src_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(5671),_home_yuki_Devel_go_src_com_geophone_observer_frontend_src_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(3144),_home_yuki_Devel_go_src_com_geophone_observer_frontend_src_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(136),_home_yuki_Devel_go_src_com_geophone_observer_frontend_src_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(7277),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7313),_helpers_utilities_getApiUrl__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(9635),_config__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6287),_helpers_requests_createRequest__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(4234),react_polling__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4477),_helpers_alerts_sweetAlert__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(4209),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(6417),Station=function(_Component){(0,_home_yuki_Devel_go_src_com_geophone_observer_frontend_src_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_5__.Z)(Station,_Component);var _super=(0,_home_yuki_Devel_go_src_com_geophone_observer_frontend_src_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_6__.Z)(Station);function Station(e){var t;return(0,_home_yuki_Devel_go_src_com_geophone_observer_frontend_src_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_7__.Z)(this,Station),(t=_super.call(this,e)).fetchData=function(e){return(0,_helpers_requests_createRequest__WEBPACK_IMPORTED_MODULE_8__.default)({url:e,method:_config__WEBPACK_IMPORTED_MODULE_1__.default.backend.api.station.method})},t.state={cards:[{name:"\u89e3\u7801\u8baf\u606f\u91cf",color:"bg-green-600",key:"this.state.response.status.messages",unit:"\u6761"},{name:"\u9519\u8bef\u8baf\u606f\u91cf",color:"bg-red-600",key:"this.state.response.status.errors",unit:"\u6761"},{name:"\u5df2\u63a8\u9001\u8baf\u606f",color:"bg-indigo-600",key:"this.state.response.status.pushed",unit:"\u6761"},{name:"\u63a8\u9001\u5931\u8d25\u8baf\u606f",color:"bg-pink-600",key:"this.state.response.status.failures",unit:"\u6761"},{name:"\u5f85\u63a8\u9001\u8baf\u606f",color:"bg-yellow-600",key:"this.state.response.status.queued",unit:"\u6761"},{name:"\u65f6\u95f4\u504f\u79fb\u91cf",color:"bg-blue-600",key:"this.state.response.status.offset",unit:"\u79d2"},{name:"\u9519\u8bef\u8baf\u606f\u91cf",color:"bg-red-600",key:"this.state.response.status.errors",unit:"\u6761"},{name:"\u5df2\u63a8\u9001\u8baf\u606f",color:"bg-indigo-600",key:"this.state.response.status.pushed",unit:"\u6761"},{name:"\u63a8\u9001\u5931\u8d25\u8baf\u606f",color:"bg-pink-600",key:"this.state.response.status.failures",unit:"\u6761"},{name:"\u5f85\u63a8\u9001\u8baf\u606f",color:"bg-yellow-600",key:"this.state.response.status.queued",unit:"\u6761"},{name:"\u65f6\u95f4\u504f\u79fb\u91cf",color:"bg-blue-600",key:"this.state.response.status.offset",unit:"\u79d2"},{name:"\u65f6\u95f4\u504f\u79fb\u91cf",color:"bg-blue-600",key:"this.state.response.status.offset",unit:"\u79d2"},{name:"\u5f85\u63a8\u9001\u8baf\u606f",color:"bg-yellow-600",key:"this.state.response.status.queued",unit:"\u6761"},{name:"\u65f6\u95f4\u504f\u79fb\u91cf",color:"bg-blue-600",key:"this.state.response.status.offset",unit:"\u79d2"},{name:"\u65f6\u95f4\u504f\u79fb\u91cf",color:"bg-blue-600",key:"this.state.response.status.offset",unit:"\u79d2"},{name:"\u5f85\u63a8\u9001\u8baf\u606f",color:"bg-yellow-600",key:"this.state.response.status.queued",unit:"\u6761"},{name:"\u65f6\u95f4\u504f\u79fb\u91cf",color:"bg-blue-600",key:"this.state.response.status.offset",unit:"\u79d2"},{name:"\u65f6\u95f4\u504f\u79fb\u91cf",color:"bg-blue-600",key:"this.state.response.status.offset",unit:"\u79d2"}],response:{uptime:0,memory:{total:0,free:0,used:0,percent:0},disk:{total:0,free:0,used:0,percent:0},status:{messages:0,pushed:0,errors:0,failures:0,queued:0,offset:0},os:{os:"",arch:"",distro:"",hostname:""},cpu:{model:"",percent:0}}},t}return(0,_home_yuki_Devel_go_src_com_geophone_observer_frontend_src_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_9__.Z)(Station,[{key:"render",value:function render(){var _this2=this;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(react_polling__WEBPACK_IMPORTED_MODULE_2__.Z,{interval:1e3,url:(0,_helpers_utilities_getApiUrl__WEBPACK_IMPORTED_MODULE_10__.default)({tls:_config__WEBPACK_IMPORTED_MODULE_1__.default.backend.tls,host:_config__WEBPACK_IMPORTED_MODULE_1__.default.backend.host,port:_config__WEBPACK_IMPORTED_MODULE_1__.default.backend.port,version:_config__WEBPACK_IMPORTED_MODULE_1__.default.backend.version,api:_config__WEBPACK_IMPORTED_MODULE_1__.default.backend.api.station.uri,type:_config__WEBPACK_IMPORTED_MODULE_1__.default.backend.api.station.type}),onSuccess:function(e){var t=e.data.data;return _this2.setState({response:t}),e},onFailure:function(){return(0,_helpers_alerts_sweetAlert__WEBPACK_IMPORTED_MODULE_3__.timerAlert)({title:"\u8fde\u63a5\u5931\u8d25",html:"\u8bf7\u68c0\u67e5\u7f51\u7edc\u8fde\u63a5\uff0c\u9875\u9762\u5373\u5c06\u5237\u65b0",loading:!1,timer:3e3,callback:function(){window.location.reload()}})},retryCount:3,promise:this.fetchData,render:function render(_ref){var isPolling=_ref.isPolling;return isPolling||(0,_helpers_alerts_sweetAlert__WEBPACK_IMPORTED_MODULE_3__.timerAlert)({title:"\u6b63\u5728\u8fde\u63a5",html:"\u6b63\u5728\u8fde\u63a5\u670d\u52a1\u5668",loading:!0,timer:1e3}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{className:"flex flex-wrap",children:_this2.state.cards.map((function(item,index){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{className:"w-full md:w-1/2 xl:w-1/3 p-3",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{className:"bg-gray-200 border rounded-lg shadow p-2",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{className:"flex flex-row items-center",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{className:"flex-shrink pr-4",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{className:"rounded-sm p-3 ".concat(item.color)})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{className:"flex-1 text-right md:text-center",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("h5",{className:"font-bold uppercase text-gray-500",children:item.name}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("h3",{className:"font-bold text-3xl",children:"".concat(eval(item.key)," ").concat(item.unit)})]})]})})},index)}))})}})}}]),Station}(react__WEBPACK_IMPORTED_MODULE_0__.Component)},4209:function(e,t,n){"use strict";n.r(t),n.d(t,{confirmAlert:function(){return c},errorAlert:function(){return u},infoAlert:function(){return a},inputAlert:function(){return h},selectAlert:function(){return d},successAlert:function(){return s},timerAlert:function(){return f},toastAlert:function(){return p},warningAlert:function(){return l}});var r=n(4165),o=n(5861),_=n(7114),i=n.n(_),s=function(e){var t=e.title,n=e.html;return i().fire({title:t,html:n,icon:"success",confirmButtonText:"\u786e\u8ba4",allowOutsideClick:!1})},u=function(e){var t=e.title,n=e.html;return i().fire({title:t,html:n,icon:"error",confirmButtonText:"\u786e\u8ba4",allowOutsideClick:!1})},l=function(e){var t=e.title,n=e.html;return i().fire({title:t,html:n,icon:"warning",confirmButtonText:"\u786e\u8ba4",showCancelButton:!0,cancelButtonText:"\u53d6\u6d88",allowOutsideClick:!1})},a=function(e){var t=e.title,n=e.html;return i().fire({title:t,html:n,icon:"info",confirmButtonText:"\u786e\u8ba4",allowOutsideClick:!1})},c=function(e){var t=e.title,n=e.html,r=e.confirmButtonText,o=e.cancelButtonText,_=e.callback;return i().fire({title:t,html:n,icon:"warning",showCancelButton:!!o,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",allowOutsideClick:!1,cancelButtonText:o,confirmButtonText:r}).then((function(e){e.value&&_&&_()}))},f=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var n,o,_,s,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.title,o=t.html,_=t.timer,s=t.loading,u=t.callback,null,e.next=4,i().fire({title:n,html:o,timer:_,timerProgressBar:!0,allowOutsideClick:!1,showConfirmButton:!1,didOpen:function(){s&&i().showLoading()},willClose:function(){clearInterval(null)}}).then((function(e){return e.dismiss===i().DismissReason.timer&&u&&u(),e}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(e){var t=e.title,n=e.html,r=e.icon,o=e.timer;return i().mixin({toast:!0,position:"top-end",timer:o,timerProgressBar:!0,showConfirmButton:!1,didOpen:function(e){e.addEventListener("mouseenter",i().stopTimer),e.addEventListener("mouseleave",i().resumeTimer)}}).fire({icon:r,title:t,html:n})},d=function(e){var t=e.title,n=e.html,r=e.inputOptions,o=e.callback;return i().fire({title:t,html:n,input:"select",inputOptions:r,inputPlaceholder:"\u8bf7\u9009\u62e9",showCancelButton:!1,allowOutsideClick:!1,inputValidator:function(e){if(!e)return"\u8bf7\u9009\u62e9\u6709\u6548\u7684\u9009\u9879"}}).then((function(e){e.value&&o&&o(e.value)}))},h=function(e){var t=e.title,n=e.html,r=e.input,o=e.callback;return i().fire({title:t,html:n,input:r,inputAttributes:{autocapitalize:"off"},confirmButtonText:"\u786e\u8ba4",showCancelButton:!1,allowOutsideClick:!1,inputValidator:function(e){if(!e)return"\u8bf7\u8f93\u5165\u6709\u6548\u7684\u503c"}}).then((function(e){e.value&&o&&o(e.value)}))}},4234:function(e,t,n){"use strict";n.r(t);var r=n(6573);t.default=function(e){var t=e.url,n=e.method,o=e.headers,_=e.data;return r.Z.request({headers:o,method:n,data:_,url:t})}},9635:function(e,t,n){"use strict";n.r(t);t.default=function(e){var t=e.host,n=e.port,r=e.api,o=e.version,_=e.tls,i=e.type,s="".concat(t,":").concat(n,"/api/").concat(o,"/").concat(r);switch(i){case"http":return _?"https://".concat(s):"http://".concat(s);case"websocket":return _?"wss://".concat(s):"ws://".concat(s);default:return null}}},1729:function(e,t,n){"use strict";var r=n(7201);function o(){}function _(){}_.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,_,i){if(i!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:_,resetWarningCache:o};return n.PropTypes=n,n}},5192:function(e,t,n){e.exports=n(1729)()},7201:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4543:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.ReactPolling=void 0;var r=_(n(7313)),o=_(n(5192));function _(e){return e&&e.__esModule?e:{default:e}}function i(e){return function(){var t,n=s(e);if(function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()){var r=s(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,t)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}var u=function(e){var t,n;n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;i(r);function r(t){var n;return(n=e.call(this,t)||this).state={isPolling:!1},n.initConfig(t),n}var o=r.prototype;return o.initConfig=function(e){var t=e.url,n=e.interval,r=e.retryCount,o=e.backOffFactor,_=e.onSuccess,i=e.onFailure,s=e.promise,u=function(e,t){if(null==e)return{};var n,r,o={},_=Object.keys(e);for(r=0;r<_.length;r++)n=_[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,["url","interval","retryCount","backOffFactor","onSuccess","onFailure","promise"]);n=Number(n),r=Number(r),o=Number(o),this.config={url:t,interval:n,shouldRetry:!!r,retryCount:r,backOffFactor:o,onSuccess:_,onFailure:i,promise:s,api:u}},o.stopPolling=function(){if(this._ismounted){this.poll&&(clearTimeout(this.poll),this.poll=null),this.setState({isPolling:!1})}},o.startPolling=function(){if(!this.config.url)throw new Error("No url provided to poll. Please provide a config object with the url param set");this.config.interval=this.props.interval,this.setState({isPolling:!0}),this.runPolling()},o.runPolling=function(){var e=this.config,t=e.url,n=e.interval,r=e.backOffFactor,o=e.onSuccess,_=e.onFailure,i=e.promise,s=e.api,u=i&&i(t)||fetch(t,s),l=this;this.poll=setTimeout((function(){u.then((function(e){return e&&e.json?e.json().then((function(t){return e.ok?t:Promise.reject({status:e.status,data:t})})).catch((function(t){return e.ok?t:Promise.reject({status:e.status,data:t})})):e})).then(o).then((function(e){l.state.isPolling&&e?(l.config.interval*=r,l.runPolling()):l.stopPolling()})).catch((function(e){l.config.shouldRetry&&l.config.retryCount>0?(_&&_(e),l.config.retryCount--,l.config.interval*=r,l.runPolling()):(_&&_(e),l.stopPolling())}))}),n)},o.componentDidMount=function(){this._ismounted=!0,this.startPolling()},o.render=function(){return this.props.render?this.props.render({startPolling:this.startPolling.bind(this),stopPolling:this.stopPolling.bind(this),isPolling:this.state.isPolling}):this.props.children({startPolling:this.startPolling.bind(this),stopPolling:this.stopPolling.bind(this),isPolling:this.state.isPolling})},o.componentWillUnmount=function(){this.stopPolling(),this._ismounted=!1},r}(r.default.Component);t.ReactPolling=u,u.propTypes={url:o.default.string,interval:o.default.number,retryCount:o.default.number,onSuccess:o.default.func.isRequired,onFailure:o.default.func,headers:o.default.object,method:o.default.string,body:o.default.object,render:o.default.func,promise:o.default.func,backOffFactor:o.default.number,children:o.default.func},u.defaultProps={interval:3e3,retryCount:0,backOffFactor:1,onFailure:function(){},method:"GET"};var l=u;t.default=l},4477:function(e,t,n){"use strict";var r;t.Z=void 0;var o=((r=n(4543))&&r.__esModule?r:{default:r}).default;t.Z=o}}]);