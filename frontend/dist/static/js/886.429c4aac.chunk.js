"use strict";(self.webpackChunkobserver=self.webpackChunkobserver||[]).push([[886],{4595:function(e,t,n){var i=n(5671),s=n(3144),r=n(136),o=n(9388),a=n(7313),l=n(5590),u=n(6417),c=function(e){(0,r.Z)(n,e);var t=(0,o.Z)(n);function n(e){var s;return(0,i.Z)(this,n),(s=t.call(this,e)).state={isBusy:!1},s}return(0,s.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.t,n=e.className,i=e.label,s=e.onClick;return(0,u.jsx)("button",{className:"w-full text-white font-medium text-sm shadow-lg rounded-lg py-2 ".concat(n),onClick:s,children:t(i.id,i.format)})}}]),n}(a.Component);t.Z=(0,l.Zh)()(c)},3387:function(e,t,n){var i=n(5671),s=n(3144),r=n(136),o=n(9388),a=n(7313),l=n(5590),u=n(6417),c=function(e){(0,r.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.t,n=e.className,i=e.label,s=e.sublabel,r=e.children,o=Array.isArray(r)?r:[r];return(0,u.jsx)("div",{className:"w-full h-full text-gray-800",children:(0,u.jsxs)("div",{className:"flex flex-col shadow-lg rounded-lg",children:[(0,u.jsxs)("div",{className:"px-4 py-3 font-bold",children:[s&&(0,u.jsx)("h6",{className:"text-gray-500 text-xs",children:t(s.id,s.format)}),(0,u.jsx)("h2",{className:"text-xl",children:t(i.id,i.format)})]}),(0,u.jsx)("div",{className:"p-4 m-2 flex flex-col justify-center gap-4 ".concat(n),children:o.map((function(e,t){return(0,u.jsx)("div",{children:e},t)}))})]})})}}]),n}(a.Component);t.Z=(0,l.Zh)()(c)},2848:function(e,t,n){var i=n(5671),s=n(3144),r=n(136),o=n(9388),a=n(4469),l=n(3604),u=n(7216),c=n(9840),d=n(3213),p=n(7313),h=n(5590),v=n(6417),f=function(e){(0,r.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.t,n=e.title,i=e.open,s=e.values,r=e.onClose,o=e.onSelect;return(0,v.jsxs)(a.Z,{onClose:r,open:i,children:[(0,v.jsx)(l.Z,{children:t(n.id,n.format)}),s.map((function(e,t){return(0,v.jsx)(u.ZP,{disableGutters:!0,children:(0,v.jsx)(c.Z,{onClick:function(){return o&&o(e[1])},children:(0,v.jsx)(d.Z,{primary:e[0],secondary:e[3]?e[3]:e[1]})})},t)}))]})}}]),n}(p.Component);t.Z=(0,h.Zh)()(f)},8886:function(e,t,n){n.r(t),n.d(t,{default:function(){return X}});var i=n(1413),s=n(5671),r=n(3144),o=n(136),a=n(9388),l=n(7313),u=n(6059),c=n(501),d=n(19),p=n(3670),h=n(5097),v=n(284),f=n(8669),m=n(4656),Z=n(1109),g=n(3387),x=n(6417),b=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.children;return(0,x.jsx)("div",{className:t,children:n})}}]),n}(l.Component),w=n(4595),j=n(2848),y=n(5827),C=n(8780),k=n(1236),_=n(5467),S=n(5549),N=n(6135),T=n(5590),P=n(4469),R=n(3604),D=n(6467),q=n(3366),V=n(7462),M=n(4146),F=n(1921),A=n(8564),I=n(5469),B=n(1113),G=n(7430),O=n(2298);function W(e){return(0,O.Z)("MuiDialogContentText",e)}(0,G.Z)("MuiDialogContentText",["root"]);var $=["children","className"],z=(0,A.ZP)(B.Z,{shouldForwardProp:function(e){return(0,A.FO)(e)||"classes"===e},name:"MuiDialogContentText",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),E=l.forwardRef((function(e,t){var n=(0,I.Z)({props:e,name:"MuiDialogContentText"}),i=n.className,s=(0,q.Z)(n,$),r=function(e){var t=e.classes,n=(0,F.Z)({root:["root"]},W,t);return(0,V.Z)({},t,n)}(s);return(0,x.jsx)(z,(0,V.Z)({component:"p",variant:"body1",color:"text.secondary",ref:t,ownerState:s,className:(0,M.Z)(r.root,i)},n,{classes:r}))})),H=n(4505),J=n(4117),K=n(1095),L=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e){var i;return(0,s.Z)(this,n),(i=t.call(this,e)).state={input:(0,l.createRef)()},i}return(0,r.Z)(n,[{key:"render",value:function(){var e,t=this.props,n=t.t,i=t.open,s=t.title,r=t.content,o=t.cancelText,a=t.submitText,l=t.placeholder,u=t.defaultValue,c=t.inputType,d=t.onSubmit,p=t.onClose,h=this.state.input;return(0,x.jsxs)(P.Z,{open:i,children:[(0,x.jsx)(R.Z,{children:n(s.id,s.format)}),(0,x.jsxs)(D.Z,{children:[r&&(0,x.jsx)(E,{children:n(r.id,r.format)}),(0,x.jsx)(H.Z,{autoFocus:!0,fullWidth:!0,inputRef:h,className:"mt-8",type:c,defaultValue:u,label:n(null!==(e=null===l||void 0===l?void 0:l.id)&&void 0!==e?e:"",null===l||void 0===l?void 0:l.format)})]}),(0,x.jsxs)(J.Z,{children:[o&&(0,x.jsx)(K.Z,{onClick:p,children:n(o.id,o.format)}),(0,x.jsx)(K.Z,{onClick:function(){var e,t;return d&&d(null!==(e=null===(t=h.current)||void 0===t?void 0:t.value)&&void 0!==e?e:"")},children:a?n(a.id,a.format):"Submit"})]})]})}}]),n}(l.Component),Q=(0,T.Zh)()(L),U=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this,e)).handleInputSubmit=function(e){var t=r.props.t,n=r.state.input.tag,s=r.props,o=s.updateRetention,a=s.updateDuration;switch(n){case"retention":o&&o(Number(e)),u.ZP.success(t("views.setting.toasts.retention_set",{retention:e}));break;case"duration":a&&a(Number(e)),u.ZP.success(t("views.setting.toasts.duration_set",{duration:e}));break;default:return}r.setState((function(e){return{input:(0,i.Z)((0,i.Z)({},e.input),{},{open:!1})}})),setTimeout((function(){return window.location.reload()}),1e3)},r.handleRetentionChange=function(){r.setState((function(e){return{input:(0,i.Z)((0,i.Z)({},e.input),{},{open:!0,tag:"retention",title:{id:"views.setting.inputs.waveform_retention.title"},content:{id:"views.setting.inputs.waveform_retention.content"},placeholder:{id:"views.setting.inputs.waveform_retention.placeholder"},submitText:{id:"views.setting.inputs.waveform_retention.submit"},defaultValue:r.props.retention.retention.toString()})}}))},r.handleDurationChange=function(){r.setState((function(e){return{input:(0,i.Z)((0,i.Z)({},e.input),{},{open:!0,tag:"duration",title:{id:"views.setting.inputs.query_duration.title"},content:{id:"views.setting.inputs.query_duration.content"},placeholder:{id:"views.setting.inputs.query_duration.placeholder"},submitText:{id:"views.setting.inputs.query_duration.submit"},defaultValue:r.props.duration.duration.toString()})}}))},r.handleSelectScale=function(){r.setState((function(e){return{select:(0,i.Z)((0,i.Z)({},e.select),{},{open:!0})}}))},r.handleScaleChange=function(e){var t,n=null===(t=y.Z.app_settings.scales.find((function(t){return t.property().value===e})))||void 0===t?void 0:t.property();r.setState({select:(0,i.Z)((0,i.Z)({},r.state.select),{},{open:!1})});var s=r.props,o=s.t,a=s.updateScale;a&&a(n||y.m.property()),u.ZP.success(o("views.setting.toasts.scale_changed",{scale:e})),setTimeout((function(){return window.location.reload()}),1e3)},r.handlePurgeCache=function(){var e=r.props.t;localStorage.clear(),u.ZP.success(e("views.setting.toasts.cache_purged")),setTimeout((function(){return window.location.reload()}),1e3)},r.state={cards:[{label:{id:"views.setting.cards.waveform_retention"},content:{id:"views.setting.contents.waveform_retention",format:{retention:r.props.retention.retention.toString()}},button:{id:"views.setting.buttons.waveform_retention"},className:"bg-teal-700 hover:bg-teal-800",onClick:r.handleRetentionChange},{label:{id:"views.setting.cards.query_duration"},content:{id:"views.setting.contents.query_duration",format:{duration:r.props.duration.duration.toString()}},button:{id:"views.setting.buttons.query_duration"},className:"bg-lime-700 hover:bg-lime-800",onClick:r.handleDurationChange},{label:{id:"views.setting.cards.select_scale"},button:{id:"views.setting.buttons.select_scale"},className:"bg-sky-700 hover:bg-sky-800",content:{id:"views.setting.contents.select_scale",format:{scale:e.scale.scale.value}},onClick:r.handleSelectScale},{label:{id:"views.setting.cards.purge_cache"},content:{id:"views.setting.contents.purge_cache"},button:{id:"views.setting.buttons.purge_cache"},className:"bg-pink-700 hover:bg-pink-800",onClick:r.handlePurgeCache}],select:{open:!1,title:{id:"views.setting.selects.choose_scale.title"},values:y.Z.app_settings.scales.map((function(e){return[e.property().name,e.property().value]}))},input:{open:!1,title:{id:""},inputType:"number",submitText:{id:""},onSubmit:r.handleInputSubmit}},r}return(0,r.Z)(n,[{key:"render",value:function(){var e=this.props.t,t=this.state,n=t.select,s=t.cards,r=t.input;return(0,x.jsxs)(m.Z,{children:[(0,x.jsx)(p.Z,{}),(0,x.jsx)(f.Z,{}),(0,x.jsxs)(c.Z,{children:[(0,x.jsx)(h.Z,{}),(0,x.jsx)(Z.Z,{layout:"grid",children:s.map((function(t,n){var i=t.label,s=t.content,r=t.onClick,o=t.button,a=t.className;return(0,x.jsxs)(g.Z,{className:"min-h-[40vh]",label:i,children:[e(s.id,s.format).split("\n").map((function(e,t){return(0,x.jsx)(b,{className:"mb-3",children:e},t)})),(0,x.jsx)(w.Z,{className:a,onClick:r,label:o})]},n)}))})]}),(0,x.jsx)(v.Z,{}),(0,x.jsx)(d.Z,{}),(0,x.jsx)(j.Z,(0,i.Z)((0,i.Z)({},n),{},{onSelect:this.handleScaleChange})),(0,x.jsx)(Q,(0,i.Z)({},r)),(0,x.jsx)(u.x7,{position:"top-center"})]})}}]),n}(l.Component),X=(0,N.$j)(C.Z,{updateScale:k.V,updateRetention:_.V,updateDuration:S.V})((0,T.Zh)()(U))}}]);