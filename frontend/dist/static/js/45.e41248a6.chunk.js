"use strict";(self.webpackChunksrc=self.webpackChunksrc||[]).push([[45],{25242:(e,t,n)=>{n.d(t,{$:()=>l});var s=n(44414);const l=e=>{const{className:t,label:n,onClick:l}=e;return(0,s.jsx)("button",{className:"w-full text-white font-medium text-sm shadow-lg rounded-lg py-2 ".concat(null!==t&&void 0!==t?t:""),onClick:l,children:n})}},95660:(e,t,n)=>{n.d(t,{l:()=>g});var s=n(96583),l=n(40033),i=n(28170),o=n(6493),a=n(29925),r=n(25979),c=n(3788),d=n(95383),u=n(44322),m=n(79739),v=n(10226),x=n(9950),h=n(44414);const g=e=>{const{open:t,title:n,content:g,cancelText:p,submitText:f,placeholder:b,defaultValue:w,inputType:j,onSubmit:y,onClose:N,selectOptions:_}=e,A=(0,x.useRef)(null),[C,k]=(0,x.useState)("");return(0,x.useEffect)((()=>{var e;k(null!==(e=null===_||void 0===_?void 0:_[0].value)&&void 0!==e?e:"")}),[_]),(0,h.jsxs)(s.A,{onClose:N,open:t,children:[(0,h.jsx)(l.A,{children:n}),(0,h.jsxs)(i.A,{children:[g&&(0,h.jsx)(o.A,{children:g}),"select"!==j?(0,h.jsx)(a.A,{autoFocus:!0,fullWidth:!0,ref:A,className:"mt-8",type:j,label:b,defaultValue:w}):(0,h.jsxs)(r.A,{sx:{my:2},fullWidth:!0,children:[(0,h.jsx)(c.A,{id:"select",children:b}),(0,h.jsx)(d.A,{labelId:"select",label:b,defaultValue:null===_||void 0===_?void 0:_[0].value,onChange:e=>{let{target:t}=e;return k(null===t||void 0===t?void 0:t.value)},children:null===_||void 0===_?void 0:_.map((e=>{let{value:t,label:n}=e;return(0,h.jsx)(u.A,{value:t,children:n},t)}))})]})]}),(0,h.jsxs)(m.A,{children:[p&&(0,h.jsx)(v.A,{onClick:N,children:p}),(0,h.jsx)(v.A,{onClick:()=>{var e,t;y&&y("select"===j?C:null!==(e=null===(t=A.current)||void 0===t?void 0:t.value)&&void 0!==e?e:"")},children:f})]})]})}},60898:(e,t,n)=>{n.d(t,{Z:()=>l});var s=n(44414);const l=e=>{const{embedded:t,className:n,label:l,sublabel:i,children:o}=e;return(0,s.jsx)("div",{className:"w-full text-gray-800",children:(0,s.jsxs)("div",{className:"flex flex-col shadow-lg rounded-lg",children:[(0,s.jsxs)("div",{className:"px-4 py-3 font-bold",children:[i&&(0,s.jsx)("h6",{className:"text-gray-500 text-xs",children:i}),(0,s.jsx)("h2",{className:t?"text-md":"text-lg",children:l})]}),(0,s.jsx)("div",{className:"p-4 m-2 flex flex-col justify-center gap-4 ".concat(null!==n&&void 0!==n?n:""),children:o})]})})}},2074:(e,t,n)=>{n.d(t,{l:()=>x});var s=n(96583),l=n(88060),i=n(83239),o=n(82053),a=n(10226),r=n(249),c=n(32610),d=n(57357),u=n(83563),m=n(74745),v=n(44414);const x=e=>{const{title:t,open:n,options:x,onClose:h,onSelect:g}=e;return(0,v.jsxs)(s.A,{fullWidth:!0,onClose:h,open:n,children:[(0,v.jsx)(l.A,{className:"bg-violet-500",sx:{position:"relative"},children:(0,v.jsxs)(i.A,{children:[(0,v.jsx)(o.A,{sx:{mt:1,ml:1,flex:1},variant:"h6",children:t}),(0,v.jsx)(a.A,{autoFocus:!0,color:"inherit",onClick:h,children:"X"})]})}),(0,v.jsx)(r.A,{children:!(null===x||void 0===x||!x.length)&&x.map((e=>e.length>1&&(0,v.jsxs)("div",{children:[(0,v.jsx)(c.Ay,{children:(0,v.jsx)(d.A,{onClick:()=>g&&g(e[1]),children:(0,v.jsx)(u.A,{primary:e[0],secondary:e[3===e.length?2:1].split("\n").map((e=>(0,v.jsxs)("span",{children:[e,(0,v.jsx)("br",{})]},e)))})})}),(0,v.jsx)(m.A,{})]},e[1])))})]})}},71359:(e,t,n)=>{n.d(t,{w:()=>l});var s=n(35887);const l=function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3;arguments.length>1&&void 0!==arguments[1]&&arguments[1]?s.Ay.error(e,{duration:t}):s.Ay.success(e,{duration:t})}},71045:(e,t,n)=>{n.r(t),n.d(t,{default:()=>j});var s=n(9950),l=n(55297),i=n(25242),o=n(60898),a=n(67818),r=n(66782),c=n(59126),d=n(71359),u=n(35887),m=n(44414);var v=n(82569),x=n(99145),h=n(95660),g=n(63060),p=n(2074),f=n(51596),b=n(19325),w=n(38526);const j=()=>{var e,t,n,j,y,N,_;const{t:A}=(0,a.Bd)(),C=(0,v.wA)(),{retention:k,duration:T,scales:S}=x.c,q=()=>setTimeout((()=>window.location.reload()),2500),[F,I]=(0,s.useState)({open:!1,inputType:"number"}),L=()=>I({...F,open:!1}),V=e=>{if(null!==e&&void 0!==e&&e.length){const t=parseInt(e),{maximum:n,minimum:s}=k;if(isNaN(t)||t<s||t>n)return;(0,d.w)(A("views.setting.toasts.retention_set",{current:t})),C((0,g.L)(t)),L(),q()}else I({...F,open:!0,values:{...k},onSubmit:V,cancelText:"views.setting.forms.waveform_retention.cancel",submitText:"views.setting.forms.waveform_retention.submit",title:"views.setting.forms.waveform_retention.title",content:"views.setting.forms.waveform_retention.content",placeholder:"views.setting.forms.waveform_retention.placeholder"})},[W,Z]=(0,s.useState)({open:!1}),E=()=>Z({...W,open:!1}),O=e=>{if(null!==e&&void 0!==e&&e.length){if(S.some((t=>t.property().value===e))){var t;const n=null===(t=S.find((t=>t.property().value===e)))||void 0===t?void 0:t.property().name;(0,d.w)(A("views.setting.toasts.scale_changed",{scale:n})),C((0,f.L)(e)),E(),q()}}else Z({...W,open:!0,onSelect:O,title:"views.setting.selects.choose_scale.title",options:S.map((e=>{let{property:t}=e;const{name:n,value:s}=t();return[n,s]}))})},{retention:R}=(0,v.d4)((e=>{let{retention:t}=e;return t})),{duration:$}=(0,v.d4)((e=>{let{duration:t}=e;return t})),{scale:B}=(0,v.d4)((e=>{let{scale:t}=e;return t})),D=(null===(e=S.find((e=>e.property().value===B)))||void 0===e?void 0:e.property().name)||"Unknown",[K]=(0,s.useState)([{label:"views.setting.panels.waveform_retention",content:"views.setting.contents.waveform_retention",button:"views.setting.buttons.waveform_retention",className:"bg-teal-700 hover:bg-teal-800",onClick:V,values:{current:R,...k}},{label:"views.setting.panels.query_duration",content:"views.setting.contents.query_duration",button:"views.setting.buttons.query_duration",className:"bg-lime-700 hover:bg-lime-800",onClick:e=>{if(null!==e&&void 0!==e&&e.length){const t=parseInt(e),{maximum:n,minimum:s}=k;if(isNaN(t)||t<s||t>n)return;(0,d.w)(A("views.setting.toasts.duration_set",{current:t})),C((0,g.L)(t)),L(),q()}else I({...F,open:!0,values:{...T},onSubmit:V,cancelText:"views.setting.forms.query_duration.cancel",submitText:"views.setting.forms.query_duration.submit",title:"views.setting.forms.query_duration.title",content:"views.setting.forms.query_duration.content",placeholder:"views.setting.forms.query_duration.placeholder"})},values:{current:$,...T}},{label:"views.setting.panels.select_scale",button:"views.setting.buttons.select_scale",className:"bg-sky-700 hover:bg-sky-800",content:"views.setting.contents.select_scale",onClick:O,values:{scale:D}},{label:"views.setting.panels.purge_cache",content:"views.setting.contents.purge_cache",button:"views.setting.buttons.purge_cache",className:"bg-pink-700 hover:bg-pink-800",onClick:()=>{((e,t)=>{let{title:n="Confirmation",cancelText:s="Cancel",confirmText:l="OK",onConfirmed:i,onCancelled:o,timeout:a=3e4}=t;u.Ay.custom((t=>{let{visible:a,id:r}=t;return(0,m.jsxs)("div",{className:"animate-fade animate-duration-300 max-w-md w-full bg-white shadow-lg rounded-lg flex border ".concat(a?"block":"hidden"),children:[(0,m.jsx)("div",{className:"flex-1 p-4",children:(0,m.jsx)("div",{className:"flex items-start",children:(0,m.jsxs)("div",{className:"ml-3 flex-1",children:[(0,m.jsx)("p",{className:"text-sm font-medium text-gray-900",children:n}),(0,m.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:e})]})})}),(0,m.jsxs)("div",{className:"flex border-gray-200 gap-2 items-center justify-center m-2",children:[(0,m.jsx)("button",{onClick:()=>{u.Ay.dismiss(r),i()},className:"w-full border rounded-lg px-3 py-2 flex text-sm font-medium text-white bg-red-500 hover:bg-red-700 ",children:l}),(0,m.jsx)("button",{onClick:()=>{u.Ay.dismiss(r),o&&o()},className:"w-full border rounded-lg px-3 py-2 flex text-sm font-medium hover:bg-gray-300",children:s})]})]})}),{duration:a})})(A("views.setting.toasts.confirm_purge"),{title:A("views.setting.toasts.confirm_title"),confirmText:A("views.setting.toasts.confirm_button"),cancelText:A("views.setting.toasts.cancel_button"),onConfirmed:()=>{(0,d.w)(A("views.setting.toasts.cache_purged")),localStorage.clear(),q()}})}}]),[U,X]=(0,s.useState)();return(0,s.useEffect)((()=>{(async()=>{const{backend:e,endpoints:t}=b.DR,n=await(0,w.c)({backend:e,payload:{format:"json"},timeout:30,endpoint:t.inventory});null!==n&&void 0!==n&&n.data&&X(n.data)})()}),[]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(l.m,{className:"gap-4 grid md:grid-cols-2",children:[K.map((e=>{let{label:t,content:n,button:s,className:l,onClick:a,values:r}=e;return(0,m.jsxs)(o.Z,{className:"",label:A(t),children:[A(n,{...r}).split("\n").map((e=>(0,m.jsx)("div",{children:e},e))),(0,m.jsx)(i.$,{label:A(s),className:l,onClick:()=>a()})]},t)})),(0,m.jsx)(h.l,{...F,onClose:L,title:A(null!==(t=F.title)&&void 0!==t?t:""),cancelText:A(null!==(n=F.cancelText)&&void 0!==n?n:""),submitText:A(null!==(j=F.submitText)&&void 0!==j?j:""),placeholder:A(null!==(y=F.placeholder)&&void 0!==y?y:""),content:A(null!==(N=F.content)&&void 0!==N?N:"",{...F.values})}),(0,m.jsx)(p.l,{...W,onClose:E,title:A(null!==(_=W.title)&&void 0!==_?_:"")})]}),!(null===U||void 0===U||!U.length)&&(0,m.jsx)(o.Z,{label:A("views.setting.panels.station_inventory"),children:(0,m.jsx)(r.A,{language:"xml",style:c.A,children:U})})]})}}}]);