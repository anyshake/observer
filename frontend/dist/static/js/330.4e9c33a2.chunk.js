"use strict";(self.webpackChunksrc=self.webpackChunksrc||[]).push([[330,341],{1330:function(t,e,a){a.r(e),a.d(e,{default:function(){return m}});var n=a(1413),s=a(136),i=a(516),r=a(5671),o=a(3144),h=a(7313),c=a(3576),l=a.n(c),u=a(3067),v=a(2341),d=a(6417),f=function(){function t(e,a,n){(0,r.Z)(this,t),this.baseCanvas=e,e.width=a,e.height=n,this.baseCanvasCtx=this.baseCanvas.getContext("2d"),this.colors=this.setColor(275)}return(0,o.Z)(t,[{key:"init",value:function(){var t=document.createElement("canvas");t.width=this.baseCanvas.width,t.height=this.baseCanvas.height;var e=t.getContext("2d"),a=document.createElement("canvas");return a.width=t.width,a.height=t.height,e._tempContext=a.getContext("2d"),e}},{key:"drawGird",value:function(){var t=this.baseCanvas.width,e=this.baseCanvas.height;this.baseCanvasCtx.strokeStyle="#aaa",this.baseCanvasCtx.beginPath();for(var a=10;a<t;a+=10)this.baseCanvasCtx.moveTo(a,0),this.baseCanvasCtx.lineTo(a,e);for(var n=10;n<e;n+=10)this.baseCanvasCtx.moveTo(0,n),this.baseCanvasCtx.lineTo(t,n);this.baseCanvasCtx.stroke()}},{key:"drawAxis",value:function(){}},{key:"drawFFT",value:function(t,e){var a=e.canvas,n=a.width,s=a.height,i=e._tempContext,r=i.canvas;i.drawImage(a,0,0,n,s);for(var o=(0,v.default)(t),h=(0,u.fft)(o),c=u.util.fftFreq(h,o.length),l=u.util.fftMag(h),d=c.map((function(t,e){return{frequency:t,magnitude:50*l[e]}})),f=0;f<Math.max(d.length,s);f++){var m=d[Math.floor(f*(d.length/s))];e.fillStyle=this.getColor(m.magnitude),e.fillRect(n-1,s-f,1,1)}e.translate(-1,0),e.drawImage(r,0,0,n,s,0,0,n,s),e.setTransform(1,0,0,1,0,0),this.baseCanvasCtx.drawImage(a,0,0,n,s)}},{key:"setColor",value:function(t){var e=new(l().scale)([[0,0,255,1],[0,255,255,1],[0,255,0,1],[255,255,0,1],[255,0,0,1],[255,0,255,1],[128,0,128,1]],[0,.1,.2,.3,.4,.6,.8]).domain([0,t]);return Array.from({length:t},(function(t,a){return e(a).hex()}))}},{key:"getColor",value:function(t){var e=this.colors[t>>0];return e||this.colors[this.colors.length-1]}}]),t}(),m=function(t){(0,s.Z)(a,t);var e=(0,i.Z)(a);function a(t){var n;return(0,r.Z)(this,a),(n=e.call(this,t)).state={spectrum:{instance:null,context:null,width:1e3,height:350}},n}return(0,o.Z)(a,[{key:"componentDidMount",value:function(){var t=new f(document.getElementById("viewport"),this.state.spectrum.width,this.state.spectrum.height),e=t.init();t.drawGird(),this.setState({spectrum:(0,n.Z)((0,n.Z)({},this.state.spectrum),{},{instance:t,context:e})})}},{key:"componentDidUpdate",value:function(t){t.data.timestamp!==this.props.data.timestamp&&this.state.spectrum.context&&this.state.spectrum.instance.drawFFT(this.props.data.synthesis,this.state.spectrum.context)}},{key:"render",value:function(){return(0,d.jsx)("div",{className:"mx-auto w-full",children:(0,d.jsx)("div",{className:"overflow-hidden",children:(0,d.jsx)("div",{className:"overflow-x-scroll flex",children:(0,d.jsx)("div",{className:"mx-auto",children:(0,d.jsx)("canvas",{className:"rounded-lg",id:"viewport"})})})})})}}]),a}(h.Component)},2341:function(t,e,a){a.r(e);var n=a(3433);e.default=function(t){for(var e=1;e<t.length;)e*=2;return[].concat((0,n.Z)(t),(0,n.Z)(Array(e-t.length).fill(0)))}}}]);