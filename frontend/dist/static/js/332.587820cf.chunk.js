"use strict";(self.webpackChunkobserver=self.webpackChunkobserver||[]).push([[332],{4595:function(t,e,n){var i=n(5671),s=n(3144),r=n(136),o=n(9388),a=n(7313),l=n(5590),u=n(6417),c=function(t){(0,r.Z)(n,t);var e=(0,o.Z)(n);function n(t){var s;return(0,i.Z)(this,n),(s=e.call(this,t)).state={isBusy:!1},s}return(0,s.Z)(n,[{key:"render",value:function(){var t=this.props,e=t.t,n=t.className,i=t.label,s=t.onClick;return(0,u.jsx)("button",{className:"w-full text-white font-medium text-sm shadow-lg rounded-lg py-2 ".concat(n),onClick:s,children:e(i.id,i.format)})}}]),n}(a.Component);e.Z=(0,l.Zh)()(c)},3387:function(t,e,n){var i=n(5671),s=n(3144),r=n(136),o=n(9388),a=n(7313),l=n(5590),u=n(6417),c=function(t){(0,r.Z)(n,t);var e=(0,o.Z)(n);function n(){return(0,i.Z)(this,n),e.apply(this,arguments)}return(0,s.Z)(n,[{key:"render",value:function(){var t=this.props,e=t.t,n=t.className,i=t.label,s=t.sublabel,r=t.children,o=Array.isArray(r)?r:[r];return(0,u.jsx)("div",{className:"w-full h-full text-gray-800",children:(0,u.jsxs)("div",{className:"flex flex-col shadow-lg rounded-lg",children:[(0,u.jsxs)("div",{className:"px-4 py-3 font-bold",children:[s&&(0,u.jsx)("h6",{className:"text-gray-500 text-xs",children:e(s.id,s.format)}),(0,u.jsx)("h2",{className:"text-xl",children:e(i.id,i.format)})]}),(0,u.jsx)("div",{className:"p-4 m-2 flex flex-col justify-center gap-4 ".concat(n),children:o.map((function(t,e){return(0,u.jsx)("div",{children:t},e)}))})]})})}}]),n}(a.Component);e.Z=(0,l.Zh)()(c)},2848:function(t,e,n){var i=n(5671),s=n(3144),r=n(136),o=n(9388),a=n(4469),l=n(3604),u=n(7216),c=n(9840),d=n(3213),p=n(7313),h=n(5590),v=n(6417),f=function(t){(0,r.Z)(n,t);var e=(0,o.Z)(n);function n(){return(0,i.Z)(this,n),e.apply(this,arguments)}return(0,s.Z)(n,[{key:"render",value:function(){var t=this.props,e=t.t,n=t.title,i=t.open,s=t.values,r=t.onClose,o=t.onSelect;return(0,v.jsxs)(a.Z,{onClose:r,open:i,children:[(0,v.jsx)(l.Z,{children:e(n.id,n.format)}),s.map((function(t,e){return(0,v.jsx)(u.ZP,{disableGutters:!0,children:(0,v.jsx)(c.Z,{onClick:function(){return o&&o(t[1])},children:(0,v.jsx)(d.Z,{primary:t[0],secondary:t[3]?t[3]:t[1]})})},e)}))]})}}]),n}(p.Component);e.Z=(0,h.Zh)()(f)},6332:function(t,e,n){n.r(e),n.d(e,{default:function(){return X}});var i=n(1413),s=n(5671),r=n(3144),o=n(136),a=n(9388),l=n(7313),u=n(6059),c=n(501),d=n(19),p=n(3670),h=n(5097),v=n(284),f=n(8669),m=n(4656),Z=n(1109),g=n(3387),x=n(6417),b=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(){return(0,s.Z)(this,n),e.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){var t=this.props,e=t.className,n=t.children;return(0,x.jsx)("div",{className:e,children:n})}}]),n}(l.Component),w=n(4595),j=n(2848),y=n(5827),C=n(8780),S=n(1236),k=n(5467),_=n(5549),N=n(6135),T=n(5590),P=n(4469),R=n(3604),D=n(6467),q=n(3366),V=n(7462),M=n(4146),F=n(1921),A=n(8564),I=n(5469),B=n(1113),G=n(7430),O=n(2298);function W(t){return(0,O.Z)("MuiDialogContentText",t)}(0,G.Z)("MuiDialogContentText",["root"]);var $=["children","className"],z=(0,A.ZP)(B.Z,{shouldForwardProp:function(t){return(0,A.FO)(t)||"classes"===t},name:"MuiDialogContentText",slot:"Root",overridesResolver:function(t,e){return e.root}})({}),E=l.forwardRef((function(t,e){var n=(0,I.Z)({props:t,name:"MuiDialogContentText"}),i=n.className,s=(0,q.Z)(n,$),r=function(t){var e=t.classes,n=(0,F.Z)({root:["root"]},W,e);return(0,V.Z)({},e,n)}(s);return(0,x.jsx)(z,(0,V.Z)({component:"p",variant:"body1",color:"text.secondary",ref:e,ownerState:s,className:(0,M.Z)(r.root,i)},n,{classes:r}))})),H=n(4505),J=n(4117),K=n(1095),L=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t){var i;return(0,s.Z)(this,n),(i=e.call(this,t)).state={input:(0,l.createRef)()},i}return(0,r.Z)(n,[{key:"render",value:function(){var t,e=this.props,n=e.t,i=e.open,s=e.title,r=e.content,o=e.cancelText,a=e.submitText,l=e.placeholder,u=e.defaultValue,c=e.inputType,d=e.onSubmit,p=e.onClose,h=this.state.input;return(0,x.jsxs)(P.Z,{open:i,children:[(0,x.jsx)(R.Z,{children:n(s.id,s.format)}),(0,x.jsxs)(D.Z,{children:[r&&(0,x.jsx)(E,{children:n(r.id,r.format)}),(0,x.jsx)(H.Z,{autoFocus:!0,fullWidth:!0,inputRef:h,className:"mt-8",type:c,defaultValue:u,label:n(null!==(t=null===l||void 0===l?void 0:l.id)&&void 0!==t?t:"",null===l||void 0===l?void 0:l.format)})]}),(0,x.jsxs)(J.Z,{children:[o&&(0,x.jsx)(K.Z,{onClick:p,children:n(o.id,o.format)}),(0,x.jsx)(K.Z,{onClick:function(){var t,e;return d&&d(null!==(t=null===(e=h.current)||void 0===e?void 0:e.value)&&void 0!==t?t:"")},children:a?n(a.id,a.format):"Submit"})]})]})}}]),n}(l.Component),Q=(0,T.Zh)()(L),U=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t){var r;return(0,s.Z)(this,n),(r=e.call(this,t)).handleInputSubmit=function(t){var e=r.props.t,n=r.state.input.tag,s=r.props,o=s.updateRetention,a=s.updateDuration,l=Math.round(Number(t));switch(n){case"retention":o&&o(l),u.ZP.success(e("views.setting.toasts.retention_set",{retention:l.toString()}));break;case"duration":a&&a(l),u.ZP.success(e("views.setting.toasts.duration_set",{duration:l.toString()}));break;default:return}r.setState((function(t){return{input:(0,i.Z)((0,i.Z)({},t.input),{},{open:!1})}})),setTimeout((function(){return window.location.reload()}),1e3)},r.handleRetentionChange=function(){r.setState((function(t){return{input:(0,i.Z)((0,i.Z)({},t.input),{},{open:!0,tag:"retention",title:{id:"views.setting.inputs.waveform_retention.title"},content:{id:"views.setting.inputs.waveform_retention.content"},placeholder:{id:"views.setting.inputs.waveform_retention.placeholder"},submitText:{id:"views.setting.inputs.waveform_retention.submit"},defaultValue:r.props.retention.retention.toString()})}}))},r.handleDurationChange=function(){r.setState((function(t){return{input:(0,i.Z)((0,i.Z)({},t.input),{},{open:!0,tag:"duration",title:{id:"views.setting.inputs.query_duration.title"},content:{id:"views.setting.inputs.query_duration.content"},placeholder:{id:"views.setting.inputs.query_duration.placeholder"},submitText:{id:"views.setting.inputs.query_duration.submit"},defaultValue:r.props.duration.duration.toString()})}}))},r.handleSelectScale=function(){r.setState((function(t){return{select:(0,i.Z)((0,i.Z)({},t.select),{},{open:!0})}}))},r.handleScaleChange=function(t){var e,n=null===(e=y.Z.app_settings.scales.find((function(e){return e.property().value===t})))||void 0===e?void 0:e.property();r.setState({select:(0,i.Z)((0,i.Z)({},r.state.select),{},{open:!1})});var s=r.props,o=s.t,a=s.updateScale;a&&a((null===n||void 0===n?void 0:n.value)||y.m.property().value),u.ZP.success(o("views.setting.toasts.scale_changed",{scale:t})),setTimeout((function(){return window.location.reload()}),1e3)},r.handlePurgeCache=function(){var t=r.props.t;localStorage.clear(),u.ZP.success(t("views.setting.toasts.cache_purged")),setTimeout((function(){return window.location.reload()}),1e3)},r.state={cards:[{label:{id:"views.setting.cards.waveform_retention"},content:{id:"views.setting.contents.waveform_retention",format:{retention:r.props.retention.retention.toString()}},button:{id:"views.setting.buttons.waveform_retention"},className:"bg-teal-700 hover:bg-teal-800",onClick:r.handleRetentionChange},{label:{id:"views.setting.cards.query_duration"},content:{id:"views.setting.contents.query_duration",format:{duration:r.props.duration.duration.toString()}},button:{id:"views.setting.buttons.query_duration"},className:"bg-lime-700 hover:bg-lime-800",onClick:r.handleDurationChange},{label:{id:"views.setting.cards.select_scale"},button:{id:"views.setting.buttons.select_scale"},className:"bg-sky-700 hover:bg-sky-800",content:{id:"views.setting.contents.select_scale",format:{scale:t.scale.scale}},onClick:r.handleSelectScale},{label:{id:"views.setting.cards.purge_cache"},content:{id:"views.setting.contents.purge_cache"},button:{id:"views.setting.buttons.purge_cache"},className:"bg-pink-700 hover:bg-pink-800",onClick:r.handlePurgeCache}],select:{open:!1,title:{id:"views.setting.selects.choose_scale.title"},values:y.Z.app_settings.scales.map((function(t){return[t.property().name,t.property().value]}))},input:{open:!1,title:{id:""},inputType:"number",submitText:{id:""},onSubmit:r.handleInputSubmit}},r}return(0,r.Z)(n,[{key:"render",value:function(){var t=this.props.t,e=this.state,n=e.select,s=e.cards,r=e.input;return(0,x.jsxs)(m.Z,{children:[(0,x.jsx)(p.Z,{}),(0,x.jsx)(f.Z,{}),(0,x.jsxs)(c.Z,{children:[(0,x.jsx)(h.Z,{}),(0,x.jsx)(Z.Z,{layout:"grid",children:s.map((function(e,n){var i=e.label,s=e.content,r=e.onClick,o=e.button,a=e.className;return(0,x.jsxs)(g.Z,{className:"min-h-[40vh]",label:i,children:[t(s.id,s.format).split("\n").map((function(t,e){return(0,x.jsx)(b,{className:"mb-3",children:t},e)})),(0,x.jsx)(w.Z,{className:a,onClick:r,label:o})]},n)}))})]}),(0,x.jsx)(v.Z,{}),(0,x.jsx)(d.Z,{}),(0,x.jsx)(j.Z,(0,i.Z)((0,i.Z)({},n),{},{onSelect:this.handleScaleChange})),(0,x.jsx)(Q,(0,i.Z)({},r)),(0,x.jsx)(u.x7,{position:"top-center"})]})}}]),n}(l.Component),X=(0,N.$j)(C.Z,{updateScale:S.V,updateRetention:k.V,updateDuration:_.V})((0,T.Zh)()(U))}}]);