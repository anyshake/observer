"use strict";(self.webpackChunkg_observer=self.webpackChunkg_observer||[]).push([[592],{4595:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(5671),a=n(3144),s=n(136),o=n(7277),c=n(7313),i=n(6417),u=function(e){(0,s.Z)(n,e);var t=(0,o.Z)(n);function n(e){var a;return(0,r.Z)(this,n),(a=t.call(this,e)).state={isBusy:!1},a}return(0,a.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.label,r=e.onClick;return(0,i.jsx)("button",{className:"w-full text-white font-medium text-sm shadow-lg rounded-lg py-2 ".concat(t),onClick:r,children:n})}}]),n}(c.Component)},3387:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(5671),a=n(3144),s=n(136),o=n(7277),c=n(7313),i=n(6417),u=function(e){(0,s.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.label,r=e.sublabel,a=e.children,s=Array.isArray(a)?a:[a];return(0,i.jsx)("div",{className:"w-full h-full text-gray-800",children:(0,i.jsxs)("div",{className:"flex flex-col shadow-lg rounded-lg",children:[(0,i.jsxs)("div",{className:"px-4 py-3 font-bold",children:[(0,i.jsx)("h6",{className:"text-gray-500 text-xs",children:r}),(0,i.jsx)("h2",{className:"text-xl",children:n})]}),(0,i.jsx)("div",{className:"p-4 m-2 flex flex-col justify-center gap-4 ".concat(t),children:s.map((function(e,t){return(0,i.jsx)("div",{children:e},t)}))})]})})}}]),n}(c.Component)},3676:function(e,t,n){n.d(t,{Z:function(){return Z}});var r=n(1413),a=n(7762),s=n(5671),o=n(3144),c=n(136),i=n(7277),u=n(7313),l=n(5845),h=n(7548),d=n(1259),f=n.n(d),p=n(6417);f()(l);var Z=function(e){(0,c.Z)(n,e);var t=(0,i.Z)(n);function n(e){var r;(0,s.Z)(this,n);var a=(r=t.call(this,e)).props,o=a.height,c=a.legend,i=a.tooltip,u=a.zooming,l=a.animation,h=a.lineWidth,d=a.tickInterval,f=a.tickPrecision,p=a.lineColor,Z=a.backgroundColor;return r.state={accessibility:{enabled:!1},boost:{enabled:!0,seriesThreshold:5},chart:{zooming:u?{type:"x"}:{},marginTop:20,height:o,animation:l,backgroundColor:Z},legend:{enabled:c,itemStyle:{color:"#fff"}},plotOptions:{series:{states:{hover:{enabled:!1}},lineWidth:h}},xAxis:{labels:{style:{color:"#fff"},format:"{value:%H:%M:%S}"},type:"datetime",tickColor:"#fff",lineColor:p},yAxis:{labels:{style:{color:"#fff"},format:f?"{value:".concat(f,"f}"):"{value:0.2f}"},title:{text:""},opposite:!0,lineColor:p,tickInterval:d},tooltip:{enabled:i,format:"<div>{series.name}: {point.y}</div>"},credits:{enabled:!1},time:{useUTC:!1},title:{text:""}},r}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){l.setOptions({lang:{resetZoom:"\u590d\u4f4d\u89c6\u56fe",resetZoomTitle:"\u590d\u4f4d\u89c6\u56fe\u4e3a 1:1"}})}},{key:"render",value:function(){var e=this.props.series,t=this.state;if(e.data)e.data.sort((function(e,t){return e[0]-t[0]}));else if(e.length){var n,s=(0,a.Z)(e);try{for(s.s();!(n=s.n()).done;){n.value.data.sort((function(e,t){return e[0]-t[0]}))}}catch(o){s.e(o)}finally{s.f()}}return(0,p.jsx)(h.HighchartsReact,{options:(0,r.Z)((0,r.Z)({},t),{},{series:e}),highcharts:l})}}]),n}(u.Component)},1653:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(5671),a=n(3144),s=n(136),o=n(7277),c=n(7313),i=n(6417),u=function(e){(0,s.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.icon,r=e.label,a=e.value,s=e.unit,o=e.color;return(0,i.jsx)("div",{className:"w-full p-2 ".concat(t),children:(0,i.jsxs)("div",{className:"flex flex-row bg-gradient-to-r rounded-md p-4 shadow-xl ".concat(o?"from-indigo-500 via-purple-500 to-pink-500":"bg-slate-50 hover:bg-slate-100"),children:[n&&(0,i.jsx)("img",{className:"bg-white p-2 rounded-md w-8 h-8 md:w-12 md:h-12 self-center",src:n,alt:""}),(0,i.jsxs)("div",{className:"flex flex-col flex-grow ".concat(n&&"ml-5"),children:[(0,i.jsx)("div",{className:"text-sm whitespace-nowrap ".concat(o?"text-gray-50":"text-gray-600"),children:r}),(0,i.jsxs)("div",{className:"text-md font-medium ".concat(o?"text-gray-100":"text-gray-800"),children:[a,(0,i.jsx)("span",{className:"text-lg px-2",children:s})]})]})]})})}}]),n}(c.Component)},2848:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(5671),a=n(3144),s=n(136),o=n(7277),c=n(4469),i=n(3604),u=n(7216),l=n(9840),h=n(3007),d=n(7313),f=n(6417),p=function(e){(0,s.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.open,r=e.values,a=e.onClose,s=e.onSelect;return(0,f.jsxs)(c.Z,{onClose:a,open:n,children:[(0,f.jsx)(i.Z,{children:t}),r.map((function(e,t){return(0,f.jsx)(u.ZP,{disableGutters:!0,children:(0,f.jsx)(l.Z,{onClick:function(){return s&&s(e[1])},children:(0,f.jsx)(h.Z,{primary:e[0],secondary:e[3]?e[3]:e[1]})})},t)}))]})}}]),n}(d.Component)},1677:function(e,t){t.Z=[{tag:"station",type:"http",method:"get",uri:"/station"},{tag:"history",type:"http",method:"post",uri:"/history"},{tag:"trace",type:"http",method:"post",uri:"/trace"},{tag:"socket",type:"ws",uri:"/socket"}]},426:function(e,t){t.Z=function(e,t){for(var n=[],r=0;r<e.length;r++)r?n.push((e[r]-e[r-1])/t):n.push(0);return n}},8687:function(e,t,n){var r=n(1677),a=n(8191);t.Z=function(e){var t,n=a.Z.api_settings,s=n.version,o=n.prefix,c=null===(t=r.Z.find((function(t){return t.tag===e})))||void 0===t?void 0:t.uri;return"".concat(o,"/").concat(s).concat(c)}},2442:function(e,t,n){t.ZP=function(e,t,n){switch(n){case"MMI":return function(e,t){switch(!0){case t<1:return"1 \u5ea6";case t<2.1:return"2 \u5ea6";case t<5:return"3 \u5ea6";case t<10:return"4 \u5ea6";case t<21:return"5 \u5ea6";case t<44:return"6 \u5ea6";case t<94:return"7 \u5ea6";case t<202:return"8 \u5ea6";case t<432:return"9 \u5ea6"}return t>=432&&e>116?"10 \u5ea6":t>=432?"11 \u5ea6":"12 \u5ea6"}(e,t);case"CSIS":return function(e,t){var n=3.17*Math.log10(t)+6.59,r=3*Math.log10(e)+9.77,a=1;return(a=n>=6&&r>=6?r:(n+r)/2)<1?a=1:a>12&&(a=12),"".concat(a.toFixed(1)," \u7ea7")}(e,t);case"CWB":return function(e,t){if(t<80)switch(!0){case t<.8:return"0 \u7d1a";case t<2.5:return"1 \u7d1a";case t<8:return"2 \u7d1a";case t<25:return"3 \u7d1a";case t<80:return"4 \u7d1a"}else switch(!0){case e<15:return"4 \u7d1a";case e<30:return"5 \u5f31";case e<50:return"5 \u5f37";case e<80:return"6 \u5f31";case e<140:return"6 \u5f37"}return"7 \u7d1a"}(e,t);case"JMA":return function(e){var t=parseFloat((2*Math.log10(e)+.94).toFixed(3));switch(t=parseFloat(t.toFixed(2)),!0){case t<.5:return"0";case t<1.5:return"1";case t<2.5:return"2";case t<3.5:return"3";case t<4.5:return"4";case t<5:return"5 \u5f31";case t<5.5:return"5 \u5f37";case t<6:return"6 \u5f31";case t<6.5:return"6 \u5f37";default:return"7"}}(t);default:return"\u672a\u77e5"}}},4949:function(e,t){t.Z=function(e,t){return localStorage.getItem(e)?localStorage.getItem(e):(localStorage.setItem(e,t),t)}},6586:function(e,t){t.Z=function(e){var t=new Date(e),n=t.getFullYear(),r=(t.getMonth()+1).toString().padStart(2,"0"),a=t.getDate().toString().padStart(2,"0"),s=t.getHours().toString().padStart(2,"0"),o=t.getMinutes().toString().padStart(2,"0"),c=t.getSeconds().toString().padStart(2,"0");return"".concat(n,"-").concat(r,"-").concat(a," ").concat(s,":").concat(o,":").concat(c)}},9603:function(e,t,n){var r=n(7762);t.Z=function(e,t){var n,a=[],s=(0,r.Z)(e);try{for(s.s();!(n=s.n()).done;){var o=n.value;a.push(o/t)}}catch(c){s.e(c)}finally{s.f()}return a}},5693:function(e,t,n){var r=n(7762);t.Z=function(e,t,n){var a,s=Math.pow(2,t-1),o=[],c=(0,r.Z)(e);try{for(c.s();!(a=c.n()).done;){var i=a.value;o.push(n/s*i)}}catch(u){c.e(u)}finally{c.f()}return o}},7596:function(e,t,n){var r=n(4165),a=n(5861),s=n(6573),o=n(1677),c=n(1647),i=n(8687),u=n(8585),l=n.n(u),h=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a,u,h,d,f,p,Z,v,m,g,x,y,b,j,w,k,S,C,M,E,N,H,P;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.tag,u=t.header,h=t.body,d=t.blob,f=t.filename,p=t.timeout,Z=void 0===p?1e4:p,(v=s.Z.create({timeout:Z})).interceptors.request.use((function(e){return d||(e.headers.Accept="application/json"),e})),v.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)})),m=(0,i.Z)(a),g=null===(n=o.Z.find((function(e){return e.tag===a})))||void 0===n?void 0:n.method,e.prev=6,"ws"!==(null===(x=o.Z.find((function(e){return e.tag===a})))||void 0===x?void 0:x.type)){e.next=10;break}throw new Error("websocket protocol is not supported");case 10:return y="".concat(window.location.protocol).concat((0,c.Z)()),e.next=13,v.request({responseType:d?"blob":"json",url:"".concat(y).concat(m),headers:u,method:g,data:h});case 13:if(b=e.sent,j=b.data,w=b.headers,!d){e.next=21;break}return(k=w["content-disposition"])?(C=null===(S=k.split(";").find((function(e){return e.includes("filename=")})))||void 0===S?void 0:S.split("=")[1])?l()(j,C):l()(j,"stream"):f?l()(j,f):l()(j,"stream"),M=(new Date).toISOString(),e.abrupt("return",{time:M,path:m,data:null,error:!1,status:200,message:"Returned data is a blob"});case 21:return e.abrupt("return",j);case 24:return e.prev=24,e.t0=e.catch(6),E=(new Date).toISOString(),N=e.t0,H=N.message,P=N.status,e.abrupt("return",{path:m,time:E,data:null,error:!0,status:P||500,message:H});case 29:case"end":return e.stop()}}),e,null,[[6,24]])})));return function(t){return e.apply(this,arguments)}}();t.Z=h},1880:function(e,t,n){var r=n(9439);t.Z=function(e,t,n){for(var a=e,s=t.split(">"),o=function(){var t=s[c];try{if(t.includes("[")||t.includes("]")){var n,o,i=(null===(n=t.match(/^(.*?)\[/))||void 0===n?void 0:n[1])||"",u=(null===(o=t.match(/\[(.*?)\]/))||void 0===o?void 0:o[1])||":";if(!u.length)throw new Error("invalid path given");var l=u.split(":"),h=(0,r.Z)(l,2),d=h[0],f=h[1];a=i.length?a[i].find((function(e){return e[d]===f})):a.find((function(e){return e[d]===f}))}else a=a[t]}catch(p){return{v:e}}},c=0;c<s.length-1;c++){var i=o();if("object"===typeof i)return i.v}var u=s[s.length-1];return a[u]=n,e}},1592:function(e,t,n){n.r(t),n.d(t,{default:function(){return oe}});var r=n(4165),a=n(5861),s=n(1413),o=n(5671),c=n(3144),i=n(136),u=n(7277),l=n(7313),h=n(4791),d=n(3534),f=n(5097),p=n(501),Z=n(4656),v=n(284),m=n(771),g=n(3208),x=n(3213),y=n(7114),b=n(8791),j=n(3605),w=n(6417),k=function(e){(0,i.Z)(n,e);var t=(0,u.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,c.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.label,n=e.onChange,r=e.value,a=e.defaultValue,s=Intl.DateTimeFormat().resolvedOptions().timeZone;return(0,w.jsx)(g._,{dateAdapter:b.H,adapterLocale:j.Z,children:(0,w.jsx)(x.x,{className:"w-full",timezone:"system",views:["year","month","day","hours","minutes","seconds"],viewRenderers:{hours:y.M6,minutes:y.M6,seconds:y.M6},onChange:function(e){var t=null===e||void 0===e?void 0:e.valueOf();n(t)},label:"".concat(t,"\uff08\u65f6\u533a ").concat(s,"\uff09"),defaultValue:a,value:r,ampm:!1})})}}]),n}(l.Component),S=n(3387),C=n(4595),M=n(1109),E=n(3676),N=n(7596),H=n(6059),P=n(7762),z=n(426),F=function(e,t,n){if(!e.length)return[];for(var r,a,s=e.length,o=0;o<s-1;o++)for(var c=0;c<s-o-1;c++)if(r=e[c],a=e[c+1],("desc"===n?a[t]-r[t]:r[t]-a[t])>0){var i=e[c];e[c]=e[c+1],e[c+1]=i}return e},D=n(9603),I=n(5693),Q=n(1880),T=function(e,t,n,r){var a,s=["ehz","ehe","ehn"],o=n.fullscale,c=n.resolution,i=F(t,"ts","asc"),u=[],l=[],h=[],d=0,f=(0,P.Z)(i);try{for(f.s();!(a=f.n()).done;){var p,Z=a.value,v=(0,P.Z)(s);try{for(v.s();!(p=v.n()).done;)for(var m=p.value,g=Z[m].length,x=0!==d?d-Z.ts:1e3,y=x/g,b=(0,I.Z)(Z[m],c,o),j=(0,D.Z)(b,r[m]),w=(0,z.Z)(j,y/x),k=0;k<w.length;k++)switch(m){case"ehz":u.push([Z.ts+k*y,w[k]]);break;case"ehe":l.push([Z.ts+k*y,w[k]]);break;case"ehn":h.push([Z.ts+k*y,w[k]])}}catch(S){v.e(S)}finally{v.f()}d=Z.ts}}catch(S){f.e(S)}finally{f.f()}return(0,Q.Z)(e,"series>[name:EHZ]>data",u),(0,Q.Z)(e,"series>[name:EHE]>data",l),(0,Q.Z)(e,"series>[name:EHN]>data",h),e},A=n(2848),W=function(e){var t=e.data.geophone;return{ehz:t.ehz,ehe:t.ehe,ehn:t.ehn}},O=function(e){var t=e.data.adc;return{resolution:t.resolution,fullscale:t.fullscale}},_=n(4469),R=n(5908),q=n(9289),B=n(1113),J=n(9099),V=n(8310),G=n(7216),L=n(9840),U=n(3007),X=n(9536),Y=function(e){(0,i.Z)(n,e);var t=(0,u.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,c.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.open,r=e.values,a=e.onClose,s=e.onSelect;return(0,w.jsxs)(_.Z,{fullWidth:!0,open:n,children:[(0,w.jsx)(R.Z,{className:"bg-purple-500",sx:{position:"relative"},children:(0,w.jsxs)(q.Z,{children:[(0,w.jsx)(B.Z,{sx:{ml:2,flex:1},variant:"h6",children:t}),(0,w.jsx)(J.Z,{autoFocus:!0,color:"inherit",onClick:a,children:"X"})]})}),(0,w.jsx)(V.Z,{children:r.map((function(e,t){return(0,w.jsxs)("div",{children:[(0,w.jsx)(G.ZP,{children:(0,w.jsx)(L.Z,{onClick:function(){return s&&s(e[1])},children:(0,w.jsx)(U.Z,{primary:e[0],secondary:e[2]?e[2]:e[1]})})}),(0,w.jsx)(X.Z,{})]},t)}))})]})}}]),n}(l.Component),K=n(6586),$=n(1653),ee=n(3433),te=n(2442),ne=function(e,t,n,r,a){var s,o=r.ehz,c=r.ehe,i=r.ehn,u=n.fullscale,l=n.resolution,h=[],d=[],f=[],p=[],Z=[],v=[],m=[],g=[],x=[],y=F(t,"ts","asc"),b=y[y.length-1].ts-y[0].ts,j=10,w=(0,P.Z)(t);try{for(w.s();!(s=w.n()).done;){var k=s.value;h.push.apply(h,(0,ee.Z)((0,I.Z)(k.ehz,l,u))),d.push.apply(d,(0,ee.Z)((0,I.Z)(k.ehe,l,u))),f.push.apply(f,(0,ee.Z)((0,I.Z)(k.ehn,l,u))),j+=(k.ehz.length+k.ehe.length+k.ehn.length)/3}}catch(A){w.e(A)}finally{w.f()}j/=b/1e3,p.push.apply(p,(0,ee.Z)((0,D.Z)(h,o))),Z.push.apply(Z,(0,ee.Z)((0,D.Z)(d,c))),v.push.apply(v,(0,ee.Z)((0,D.Z)(f,i)));var S=1/j;m.push.apply(m,(0,ee.Z)((0,z.Z)(p,S))),g.push.apply(g,(0,ee.Z)((0,z.Z)(Z,S))),x.push.apply(x,(0,ee.Z)((0,z.Z)(v,S)));var C=p.reduce((function(e,t){var n=Math.abs(e),r=Math.abs(t);return Math.max(n,r)}),0),M=Z.reduce((function(e,t){var n=Math.abs(e),r=Math.abs(t);return Math.max(n,r)}),0),E=v.reduce((function(e,t){var n=Math.abs(e),r=Math.abs(t);return Math.max(n,r)}),0),N=m.reduce((function(e,t){var n=Math.abs(e),r=Math.abs(t);return Math.max(n,r)}),0),H=g.reduce((function(e,t){var n=Math.abs(e),r=Math.abs(t);return Math.max(n,r)}),0),T=x.reduce((function(e,t){var n=Math.abs(e),r=Math.abs(t);return Math.max(n,r)}),0);return(0,Q.Z)(e,"[tag:ehz-pga]>value",N.toFixed(2)),(0,Q.Z)(e,"[tag:ehz-intensity]>value","".concat(a," \u9707\u5ea6 ").concat((0,te.ZP)(C,N,a))),(0,Q.Z)(e,"[tag:ehe-pga]>value",H.toFixed(2)),(0,Q.Z)(e,"[tag:ehe-intensity]>value","".concat(a," \u9707\u5ea6 ").concat((0,te.ZP)(M,H,a))),(0,Q.Z)(e,"[tag:ehn-pga]>value",T.toFixed(2)),(0,Q.Z)(e,"[tag:ehn-intensity]>value","".concat(a," \u9707\u5ea6 ").concat((0,te.ZP)(E,T,a))),e},re=n(4949),ae=n(8191),se=1e5,oe=function(e){(0,i.Z)(n,e);var t=(0,u.Z)(n);function n(e){var c;return(0,o.Z)(this,n),(c=t.call(this,e)).promisedSetState=function(e){return new Promise((function(t){return c.setState(e,t)}))},c.handleTimeChange=function(e,t){switch(e){case"start":c.setState((function(e){return{history:(0,s.Z)((0,s.Z)({},e.history),{},{start:t})}}));break;case"end":c.setState((function(e){return{history:(0,s.Z)((0,s.Z)({},e.history),{},{end:t})}}))}},c.handleQueryHistory=(0,a.Z)((0,r.Z)().mark((function e(){var t,n,a,s,o,i,u,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.state.history,n=t.start,!((a=t.end)-n<=0)&&n&&a){e.next=6;break}return s="\u8bf7\u9009\u62e9\u6b63\u786e\u7684\u65f6\u95f4\u8303\u56f4",H.ZP.error(s),e.abrupt("return",Promise.reject(s));case 6:return e.next=8,(0,N.Z)({body:t,tag:"history",timeout:se,blob:"sac"===t.format,filename:"".concat(t.channel,"-").concat(t.start,"-").concat(t.end,".").concat(t.format)});case 8:if(o=e.sent,i=o.error,u=o.data,!i){e.next=15;break}return l="\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u8f93\u5165\u540e\u91cd\u8bd5",H.ZP.error(l),e.abrupt("return",Promise.reject(l));case 15:return e.abrupt("return",u);case 16:case"end":return e.stop()}}),e)}))),c.handleQueryEvents=(0,a.Z)((0,r.Z)().mark((function e(){var t,n,a,o,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.state.trace,e.next=3,(0,N.Z)({body:t,tag:"trace",timeout:se});case 3:if(n=e.sent,a=n.error,o=n.data,!a){e.next=10;break}return i="\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u8f93\u5165\u540e\u91cd\u8bd5",H.ZP.error(i),e.abrupt("return",Promise.reject(i));case 10:c.setState((function(e){return{modal:(0,s.Z)((0,s.Z)({},e.modal),{},{open:!0,values:o.map((function(e){var t=e.magnitude,n=e.region,r=e.event,a=e.timestamp,s=e.depth,o=e.estimated,c="[M".concat(t.toFixed(1),"] ").concat(n," / \u65f6\u523b ").concat((0,K.Z)(a)," / \u6df1\u5ea6 ").concat(s.toFixed(1)," km / \u4f20\u64ad ").concat(o.toFixed(1)," s");return[r,a+1e3*o,c]}))})}}));case 11:case"end":return e.stop()}}),e)}))),c.handleChooseEvent=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=15e4,a=new Date(t).getTime()-n,o=new Date(t).getTime()+n,e.next=5,c.promisedSetState({history:{start:a,end:o,format:"json"},modal:(0,s.Z)((0,s.Z)({},c.state.modal),{},{open:!1})});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.handleSelect=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={from:"history",dialog:(0,s.Z)((0,s.Z)({},c.state.select.dialog),{},{open:!1})},e.t0=t,e.next="history"===e.t0?4:"trace"===e.t0?9:14;break;case 4:return e.next=6,c.promisedSetState({select:a,history:(0,s.Z)((0,s.Z)({},c.state.history),{},{channel:n,format:"sac"})});case 6:return e.next=8,H.ZP.promise(c.handleQueryHistory(),{loading:"\u6b63\u5728\u67e5\u8be2...",success:"\u5386\u53f2\u6ce2\u5f62\u6570\u636e\u5bfc\u51fa\u6210\u529f",error:"\u5386\u53f2\u6ce2\u5f62\u6570\u636e\u5bfc\u51fa\u5931\u8d25"});case 8:case 13:return e.abrupt("break",14);case 9:return e.next=11,c.promisedSetState({select:a,trace:(0,s.Z)((0,s.Z)({},c.state.trace),{},{source:n})});case 11:return e.next=13,H.ZP.promise(c.handleQueryEvents(),{loading:"\u6b63\u5728\u67e5\u8be2...",success:"\u5730\u9707\u4e8b\u4ef6\u67e5\u8be2\u6210\u529f",error:"\u5730\u9707\u4e8b\u4ef6\u67e5\u8be2\u5931\u8d25"});case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),c.handleQueryWaveform=(0,a.Z)((0,r.Z)().mark((function e(){var t,n,a,o,i,u,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.promisedSetState({history:(0,s.Z)((0,s.Z)({},c.state.history),{},{format:"json"})});case 2:return e.next=4,H.ZP.promise(c.handleQueryHistory(),{loading:"\u6b63\u5728\u67e5\u8be2...",success:"\u5386\u53f2\u6ce2\u5f62\u6570\u636e\u67e5\u8be2\u6210\u529f",error:"\u5386\u53f2\u6ce2\u5f62\u6570\u636e\u67e5\u8be2\u5931\u8d25"});case 4:(t=e.sent)&&(n=c.state,a=n.adc,o=n.geophone,i=n.scale,u=T(c.state.chart,t,a,o),l=ne(c.state.labels,t,a,o,i),c.setState({chart:u,labels:l}));case 6:case"end":return e.stop()}}),e)}))),c.handleQuerySACFile=(0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.setState((function(e){return{select:{from:"history",dialog:(0,s.Z)((0,s.Z)({},e.select),{},{title:"\u9009\u62e9\u8981\u5bfc\u51fa\u7684\u901a\u9053",values:[["\u5782\u76f4\u901a\u9053","EHZ"],["\u6c34\u5e73\u4e1c\u897f","EHE"],["\u6c34\u5e73\u5357\u5317","EHN"]],open:!0})}}}));case 1:case"end":return e.stop()}}),e)}))),c.handleQuerySource=(0,a.Z)((0,r.Z)().mark((function e(){var t,n,a,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={source:"show"},e.next=3,H.ZP.promise((0,N.Z)({body:t,tag:"trace"}),{loading:"\u6b63\u5728\u83b7\u53d6\u6570\u636e\u6e90...",success:"\u6210\u529f\u53d6\u5f97\u6570\u636e\u6e90",error:"\u6570\u636e\u6e90\u83b7\u53d6\u5931\u8d25"});case 3:if(n=e.sent,a=n.data,!n.error&&a){e.next=10;break}return o="\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u8f93\u5165\u540e\u91cd\u8bd5",H.ZP.error(o),e.abrupt("return",Promise.reject(o));case 10:c.setState((function(e){return{select:{from:"trace",dialog:(0,s.Z)((0,s.Z)({},e.select.dialog),{},{open:!0,title:"\u9009\u62e9\u8981\u5730\u9707\u6570\u636e\u6765\u6e90",values:a.map((function(e){return[e.name,e.value]}))})}}}));case 11:case"end":return e.stop()}}),e)}))),c.state={scale:"JMA",trace:{source:"show"},history:{start:Date.now()-6e4,end:Date.now(),format:"json",channel:"EHZ"},chart:{backgroundColor:"transparent",tickInterval:.1,tickPrecision:.2,lineWidth:1,height:400,tooltip:!0,legend:!0,zooming:!0,series:[{type:"line",name:"EHZ",color:"#5a3eba",data:[]},{type:"line",name:"EHE",color:"#128672",data:[]},{type:"line",name:"EHN",color:"#c3268a",data:[]}]},select:{from:"history",dialog:{open:!1,title:"\u9009\u62e9\u8981\u5bfc\u51fa\u7684\u901a\u9053",values:[["\u5782\u76f4\u901a\u9053","EHZ"],["\u6c34\u5e73\u4e1c\u897f","EHE"],["\u6c34\u5e73\u5357\u5317","EHN"]]}},modal:{open:!1,values:[],title:"\u9009\u62e9\u4e00\u4e2a\u4e8b\u4ef6"},geophone:{ehz:.288,ehe:.288,ehn:.288},adc:{fullscale:5,resolution:24},labels:[{tag:"ehz-pga",label:"EHZ \u5cf0\u503c\u52a0\u901f\u5ea6",value:"0",unit:"gal"},{tag:"ehz-intensity",label:"EHZ \u5cf0\u503c\u9707\u5ea6",value:"\u672a\u77e5",unit:""},{tag:"ehe-pga",label:"EHE \u5cf0\u503c\u52a0\u901f\u5ea6",value:"0",unit:"gal"},{tag:"ehe-intensity",label:"EHE \u5cf0\u503c\u9707\u5ea6",value:"\u672a\u77e5",unit:""},{tag:"ehn-pga",label:"EHN \u5cf0\u503c\u52a0\u901f\u5ea6",value:"0",unit:"gal"},{tag:"ehn-intensity",label:"EHN \u5cf0\u503c\u9707\u5ea6",value:"\u672a\u77e5",unit:""}]},c}return(0,c.Z)(n,[{key:"componentDidMount",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t,n,a,s,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,N.Z)({tag:"station"});case 2:if(!(t=e.sent).data){e.next=11;break}n=ae.Z.app_settings.scale,a=O(t),s=W(t),o=(0,re.Z)("scale",n),this.setState({adc:a,geophone:s,scale:o}),e.next=12;break;case 11:return e.abrupt("return");case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.chart,r=t.select,a=t.modal,o=t.history,c=t.labels,i=r.from,u=r.dialog,l=o.start,g=o.end;return(0,w.jsxs)(Z.Z,{children:[(0,w.jsx)(h.Z,{}),(0,w.jsx)(d.Z,{}),(0,w.jsxs)(p.Z,{children:[(0,w.jsx)(f.Z,{}),(0,w.jsx)(S.Z,{className:"h-[430px] rounded-lg bg-pink-300",label:"\u52a0\u901f\u5ea6\u6ce2\u5f62\u56fe",children:(0,w.jsx)(E.Z,(0,s.Z)({},n))}),(0,w.jsxs)(M.Z,{layout:"grid",children:[(0,w.jsxs)(S.Z,{className:"h-[372px]",label:"\u5386\u53f2\u67e5\u8be2",children:[(0,w.jsx)(k,{value:l,label:"\u9009\u62e9\u8d77\u59cb\u65f6\u95f4",onChange:function(t){return e.handleTimeChange("start",t)}}),(0,w.jsx)(k,{value:g,label:"\u9009\u62e9\u7ed3\u675f\u65f6\u95f4",onChange:function(t){return e.handleTimeChange("end",t)}}),(0,w.jsx)(C.Z,{className:"mt-6 bg-indigo-700 hover:bg-indigo-800",onClick:this.handleQueryWaveform,label:"\u8c03\u9605\u6ce2\u5f62"}),(0,w.jsx)(C.Z,{className:"bg-green-700 hover:bg-green-800",onClick:this.handleQuerySACFile,label:"\u6570\u636e\u4e0b\u8f7d"}),(0,w.jsx)(C.Z,{className:"bg-yellow-700 hover:bg-yellow-800",onClick:this.handleQuerySource,label:"\u4e8b\u4ef6\u53cd\u67e5"})]}),(0,w.jsx)(S.Z,{label:"\u6570\u636e\u5206\u6790",children:(0,w.jsx)(M.Z,{layout:"grid",children:c.map((function(e,t){return(0,w.jsx)($.Z,(0,s.Z)({},e),t)}))})})]})]}),(0,w.jsx)(v.Z,{}),(0,w.jsx)(m.Z,{}),(0,w.jsx)(A.Z,(0,s.Z)((0,s.Z)({},u),{},{onSelect:function(t){return e.handleSelect(i,t)}})),(0,w.jsx)(Y,(0,s.Z)((0,s.Z)({},a),{},{onSelect:this.handleChooseEvent,onClose:function(){return e.setState({modal:(0,s.Z)((0,s.Z)({},a),{},{open:!1})})}})),(0,w.jsx)(H.x7,{position:"top-center"})]})}}]),n}(l.Component)}}]);