"use strict";(self.webpackChunksrc=self.webpackChunksrc||[]).push([[708],{25242:(e,t,s)=>{s.d(t,{$:()=>l});var n=s(44414);const l=e=>{const{className:t,label:s,onClick:l}=e;return(0,n.jsx)("button",{className:"w-full text-white font-medium text-sm shadow-lg rounded-lg py-2 ".concat(null!==t&&void 0!==t?t:""),onClick:l,children:s})}},95660:(e,t,s)=>{s.d(t,{l:()=>h});var n=s(96583),l=s(40033),i=s(28170),a=s(6493),o=s(29925),c=s(25979),r=s(3788),d=s(95383),u=s(44322),m=s(79739),v=s(10226),x=s(9950),p=s(44414);const h=e=>{var t;const{open:s,title:h,content:g,cancelText:b,submitText:f,placeholder:w,defaultValue:y,inputType:j,onSubmit:N,onClose:k,selectOptions:C}=e,[_,A]=(0,x.useState)(""),[T,S]=(0,x.useState)("");return(0,x.useEffect)((()=>{var e;S(null!==(e=null===C||void 0===C?void 0:C[0].value)&&void 0!==e?e:"")}),[C]),(0,p.jsxs)(n.A,{onClose:k,open:s,children:[(0,p.jsx)(l.A,{children:h}),(0,p.jsxs)(i.A,{children:[g&&(0,p.jsx)(a.A,{children:g}),(0,p.jsx)(o.A,{autoFocus:!0,fullWidth:!0,className:"mt-8",type:j,label:w,defaultValue:y,style:{display:"select"!==j?"block":"none"},onChange:e=>{let{target:t}=e;A(t.value)}}),(0,p.jsxs)(c.A,{sx:{my:2},style:{display:"select"===j?"block":"none"},children:[(0,p.jsx)(r.A,{children:w}),(0,p.jsx)(d.A,{fullWidth:!0,label:w,onChange:e=>{let{target:t}=e;S(t.value)},defaultValue:null!==(t=null===C||void 0===C?void 0:C[0].value)&&void 0!==t?t:"",children:null===C||void 0===C?void 0:C.map((e=>{let{value:t,label:s}=e;return(0,p.jsx)(u.A,{value:t,children:s},t)}))})]})]}),(0,p.jsxs)(m.A,{children:[b&&(0,p.jsx)(v.A,{onClick:k,children:b}),(0,p.jsx)(v.A,{onClick:()=>{N&&N("select"===j?T:_)},children:f})]})]})}},60898:(e,t,s)=>{s.d(t,{Z:()=>l});var n=s(44414);const l=e=>{const{embedded:t,className:s,label:l,sublabel:i,children:a}=e;return(0,n.jsx)("div",{className:"w-full text-gray-800",children:(0,n.jsxs)("div",{className:"flex flex-col shadow-lg rounded-lg",children:[(0,n.jsxs)("div",{className:"px-4 py-3 font-bold",children:[i&&(0,n.jsx)("h6",{className:"text-gray-500 text-xs",children:i}),(0,n.jsx)("h2",{className:t?"text-md":"text-lg",children:l})]}),(0,n.jsx)("div",{className:"p-4 m-2 flex flex-col justify-center gap-4 ".concat(null!==s&&void 0!==s?s:""),children:a})]})})}},2074:(e,t,s)=>{s.d(t,{l:()=>x});var n=s(96583),l=s(88060),i=s(83239),a=s(82053),o=s(10226),c=s(249),r=s(32610),d=s(57357),u=s(83563),m=s(74745),v=s(44414);const x=e=>{const{title:t,open:s,options:x,onClose:p,onSelect:h}=e;return(0,v.jsxs)(n.A,{fullWidth:!0,onClose:p,open:s,children:[(0,v.jsx)(l.A,{className:"bg-violet-500",sx:{position:"relative"},children:(0,v.jsxs)(i.A,{children:[(0,v.jsx)(a.A,{sx:{mt:1,ml:1,flex:1},variant:"h6",children:t}),(0,v.jsx)(o.A,{autoFocus:!0,color:"inherit",onClick:p,children:"X"})]})}),(0,v.jsx)(c.A,{children:!(null===x||void 0===x||!x.length)&&x.map((e=>e.length>1&&(0,v.jsxs)("div",{children:[(0,v.jsx)(r.Ay,{children:(0,v.jsx)(d.A,{onClick:()=>{h&&h(e[1])},children:(0,v.jsx)(u.A,{primary:e[0],secondary:e[3===e.length?2:1].split("\n").map((e=>(0,v.jsxs)("span",{children:[e,(0,v.jsx)("br",{})]},e)))})})}),(0,v.jsx)(m.A,{})]},e[1])))})]})}},71359:(e,t,s)=>{s.d(t,{w:()=>l});var n=s(35887);const l=function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3;arguments.length>1&&void 0!==arguments[1]&&arguments[1]?n.Ay.error(e,{duration:t}):n.Ay.success(e,{duration:t})}},67502:(e,t,s)=>{s.d(t,{a:()=>n});const n=async e=>{var t;const s=null!==(t=navigator.clipboard)&&void 0!==t?t:{writeText:e=>{const t=document.createElement("input");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}};return!!s&&(await s.writeText(e),!0)}},3708:(e,t,s)=>{s.r(t),s.d(t,{default:()=>T});var n=s(9950),l=s(55297),i=s(25242),a=s(60898),o=s(67818),c=s(71359),r=s(35887),d=s(44414);var u=s(82569),m=s(99145),v=s(95660),x=s(63060),p=s(83936),h=s(2074),g=s(51596),b=s(19325),f=s(38526),w=s(66782),y=s(59126);const j=s.p+"static/media/clipboard-regular.6bd933b3e893d26be6fdd983a9e9238e.svg";const N=s.p+"static/media/floppy-disk-solid.b3781b6d57b29b808731b06740c8fd0c.svg";const k=s.p+"static/media/check-solid.17a9f46c0eeda6a44cf65e9d0edc62e0.svg";var C=s(67502),_=s(34691);const A=e=>{const{fileName:t,language:s,children:l}=e,[i,a]=(0,n.useState)(!1);return(0,d.jsxs)("div",{className:"rounded-lg bg-gray-700 p-2",children:[(0,d.jsxs)("div",{className:"flex justify-end space-x-3 px-4",children:[(0,d.jsxs)("div",{className:"opacity-60 hover:opacity-100 transition-all cursor-pointer",onClick:()=>{(async e=>{await(0,C.a)(e),a(!0),setTimeout((()=>{a(!1)}),2e3)})(l)},children:[(0,d.jsx)("img",{className:"size-4 ".concat(i?"hidden":"block"),src:j,alt:""}),(0,d.jsx)("img",{className:"size-4 ".concat(i?"block":"hidden"),src:k,alt:""})]}),!(null===t||void 0===t||!t.length)&&(0,d.jsx)("div",{className:"opacity-60 hover:opacity-100 transition-all cursor-pointer",onClick:()=>{(e=>{const s=new Blob([e],{type:"text/plain;charset=utf-8"});(0,_.saveAs)(s,t)})(l)},children:(0,d.jsx)("img",{className:"size-4",src:N,alt:""})})]}),(0,d.jsx)(w.A,{language:s,style:y.A,children:l})]})},T=()=>{var e,t,s,w,y,j,N;const{t:k}=(0,o.Bd)(),C=(0,u.wA)(),{retention:_,duration:T,scales:S}=m.c,q=()=>{setTimeout((()=>{window.location.reload()}),2500)},[z,E]=(0,n.useState)({open:!1,inputType:"number"}),F=()=>{E({...z,open:!1})},L=e=>{if(null!==e&&void 0!==e&&e.length){const t=parseInt(e),{maximum:s,minimum:n}=_;if(isNaN(t)||t<n||t>s)return;(0,c.w)(k("views.setting.toasts.retention_set",{current:t})),C((0,x.L)(t)),F(),q()}else E({...z,open:!0,values:{..._},onSubmit:L,cancelText:"views.setting.forms.waveform_retention.cancel",submitText:"views.setting.forms.waveform_retention.submit",title:"views.setting.forms.waveform_retention.title",content:"views.setting.forms.waveform_retention.content",placeholder:"views.setting.forms.waveform_retention.placeholder"})},V=e=>{if(null!==e&&void 0!==e&&e.length){const t=parseInt(e),{maximum:s,minimum:n}=T;if(isNaN(t)||t<n||t>s)return;(0,c.w)(k("views.setting.toasts.duration_set",{current:t})),C((0,p.L)(t)),F(),q()}else E({...z,open:!0,values:{...T},onSubmit:V,cancelText:"views.setting.forms.query_duration.cancel",submitText:"views.setting.forms.query_duration.submit",title:"views.setting.forms.query_duration.title",content:"views.setting.forms.query_duration.content",placeholder:"views.setting.forms.query_duration.placeholder"})},[W,Z]=(0,n.useState)({open:!1}),B=()=>{Z({...W,open:!1})},I=e=>{if(null!==e&&void 0!==e&&e.length){if(S.some((t=>t.property().value===e))){var t;const s=null===(t=S.find((t=>t.property().value===e)))||void 0===t?void 0:t.property().name;(0,c.w)(k("views.setting.toasts.scale_changed",{scale:s})),C((0,g.L)(e)),B(),q()}}else Z({...W,open:!0,onSelect:I,title:"views.setting.selects.choose_scale.title",options:S.map((e=>{let{property:t}=e;const{name:s,value:n}=t();return[s,n]}))})},{retention:O}=(0,u.d4)((e=>{let{retention:t}=e;return t})),{duration:$}=(0,u.d4)((e=>{let{duration:t}=e;return t})),{scale:D}=(0,u.d4)((e=>{let{scale:t}=e;return t})),K=(null===(e=S.find((e=>e.property().value===D)))||void 0===e?void 0:e.property().name)||"Unknown",[R]=(0,n.useState)([{label:"views.setting.panels.waveform_retention",content:"views.setting.contents.waveform_retention",button:"views.setting.buttons.waveform_retention",className:"bg-teal-700 hover:bg-teal-800",onClick:L,values:{current:O,..._}},{label:"views.setting.panels.query_duration",content:"views.setting.contents.query_duration",button:"views.setting.buttons.query_duration",className:"bg-lime-700 hover:bg-lime-800",onClick:V,values:{current:$,...T}},{label:"views.setting.panels.select_scale",button:"views.setting.buttons.select_scale",className:"bg-sky-700 hover:bg-sky-800",content:"views.setting.contents.select_scale",onClick:I,values:{scale:K}},{label:"views.setting.panels.purge_cache",content:"views.setting.contents.purge_cache",button:"views.setting.buttons.purge_cache",className:"bg-pink-700 hover:bg-pink-800",onClick:()=>{((e,t)=>{let{title:s="Confirmation",cancelText:n="Cancel",confirmText:l="OK",onConfirmed:i,onCancelled:a,timeout:o=3e4}=t;r.Ay.custom((t=>{let{visible:o,id:c}=t;return(0,d.jsxs)("div",{className:"animate-fade animate-duration-300 max-w-md w-full bg-white shadow-lg rounded-lg flex border ".concat(o?"block":"hidden"),children:[(0,d.jsx)("div",{className:"flex-1 p-4",children:(0,d.jsx)("div",{className:"flex items-start",children:(0,d.jsxs)("div",{className:"ml-3 flex-1",children:[(0,d.jsx)("p",{className:"text-sm font-medium text-gray-900",children:s}),(0,d.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:e})]})})}),(0,d.jsxs)("div",{className:"flex border-gray-200 gap-2 items-center justify-center m-2",children:[(0,d.jsx)("button",{onClick:()=>{r.Ay.dismiss(c),i()},className:"w-full border rounded-lg px-3 py-2 flex text-sm font-medium text-white bg-red-500 hover:bg-red-700 ",children:l}),(0,d.jsx)("button",{onClick:()=>{r.Ay.dismiss(c),a&&a()},className:"w-full border rounded-lg px-3 py-2 flex text-sm font-medium hover:bg-gray-300",children:n})]})]})}),{duration:o})})(k("views.setting.toasts.confirm_purge"),{title:k("views.setting.toasts.confirm_title"),confirmText:k("views.setting.toasts.confirm_button"),cancelText:k("views.setting.toasts.cancel_button"),onConfirmed:()=>{(0,c.w)(k("views.setting.toasts.cache_purged")),localStorage.clear(),q()}})}}]),[U,X]=(0,n.useState)();return(0,n.useEffect)((()=>{(async()=>{const{backend:e,endpoints:t}=b.DR,s=await(0,f.c)({backend:e,payload:{format:"json"},timeout:30,endpoint:t.inventory});null!==s&&void 0!==s&&s.data&&X(s.data)})()}),[]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(l.m,{className:"gap-4 grid md:grid-cols-2",children:[R.map((e=>{let{label:t,content:s,button:n,className:l,onClick:o,values:c}=e;return(0,d.jsxs)(a.Z,{className:"",label:k(t),children:[k(s,{...c}).split("\n").map((e=>(0,d.jsx)("div",{children:e},e))),(0,d.jsx)(i.$,{label:k(n),onClick:o,className:l})]},t)})),(0,d.jsx)(v.l,{...z,onClose:F,title:k(null!==(t=z.title)&&void 0!==t?t:""),cancelText:k(null!==(s=z.cancelText)&&void 0!==s?s:""),submitText:k(null!==(w=z.submitText)&&void 0!==w?w:""),placeholder:k(null!==(y=z.placeholder)&&void 0!==y?y:""),content:k(null!==(j=z.content)&&void 0!==j?j:"",{...z.values})}),(0,d.jsx)(h.l,{...W,onClose:B,title:k(null!==(N=W.title)&&void 0!==N?N:"")})]}),!(null===U||void 0===U||!U.length)&&(0,d.jsx)(a.Z,{label:k("views.setting.panels.station_inventory"),children:(0,d.jsx)(A,{language:"xml",fileName:"inventory.xml",children:U})})]})}}}]);