"use strict";(self.webpackChunkg_observer=self.webpackChunkg_observer||[]).push([[10],{1653:function(e,t,a){a.d(t,{Z:function(){return l}});var r=a(5671),n=a(3144),o=a(136),c=a(7277),s=a(7313),i=a(6417),l=function(e){(0,o.Z)(a,e);var t=(0,c.Z)(a);function a(){return(0,r.Z)(this,a),t.apply(this,arguments)}return(0,n.Z)(a,[{key:"render",value:function(){var e=this.props,t=e.className,a=e.icon,r=e.label,n=e.value,o=e.unit,c=e.color;return(0,i.jsx)("div",{className:"w-full p-2 ".concat(t),children:(0,i.jsxs)("div",{className:"flex flex-row bg-gradient-to-r rounded-md p-4 shadow-xl ".concat(c?"from-indigo-500 via-purple-500 to-pink-500":"bg-slate-50 hover:bg-slate-100"),children:[a&&(0,i.jsx)("img",{className:"bg-white p-2 rounded-md w-8 h-8 md:w-12 md:h-12 self-center",src:a,alt:""}),(0,i.jsxs)("div",{className:"flex flex-col flex-grow ml-5",children:[(0,i.jsx)("div",{className:"text-sm whitespace-nowrap ".concat(c?"text-gray-50":"text-gray-600"),children:r}),(0,i.jsxs)("div",{className:"text-md font-medium ".concat(c?"text-gray-100":"text-gray-800"),children:[n,(0,i.jsx)("span",{className:"text-lg px-2",children:o})]})]})]})})}}]),a}(s.Component)},4447:function(e,t,a){a.r(t),a.d(t,{default:function(){return K}});var r=a(1413),n=a(4165),o=a(5861),c=a(5671),s=a(3144),i=a(136),l=a(7277),u=a(7313),d=a(4791),f=a(3534),m=a(5097),h=a(501),p=a(318),v=a(1653),x=a(4656),Z=a(5608),g=a(3676),b=a(1109),j=a(771),y=a(4580),w=a(8153),k=a(9062),C=(a(3331),a(7248)),N=a.n(C);var z=a.p+"static/media/location-dot-solid.763794361437464c10451de38cd290f7.svg",D=a(6417),F=function(e){(0,i.Z)(a,e);var t=(0,l.Z)(a);function a(){return(0,c.Z)(this,a),t.apply(this,arguments)}return(0,s.Z)(a,[{key:"render",value:function(){var e=this.props,t=e.className,a=e.minZoom,r=e.maxZoom,n=e.center,o=e.zoom,c=e.tile,s=e.marker,i=new(N().Icon)({iconUrl:z,iconAnchor:[13,28],iconSize:[18,25]});return(0,D.jsxs)(y.h,{className:"z-0 w-full ".concat(t),attributionControl:!1,scrollWheelZoom:!1,zoomControl:!0,maxZoom:r,minZoom:a,center:n,zoom:o,style:{cursor:"default"},children:[(0,D.jsx)(w.I,{url:c}),s&&(0,D.jsx)(k.J,{position:s,icon:i})]})}}]),a}(u.Component),A=a(284);var S=a.p+"static/media/circle-check-solid.3fb46b8931cbbf9f966175f42b55a087.svg";var U=a.p+"static/media/bug-solid.7f781f9ddd35c29f11111e36602dcc87.svg";var I=a.p+"static/media/paper-plane-solid.e1f40db20eab51657c5490a69c103292.svg";var W=a.p+"static/media/circle-xmark-solid.ea0857c87457d25b161c3a37ad4e3845.svg";var q=a.p+"static/media/hourglass-half-solid.1e8dc3284939ca52c0fd542da1fbf89b.svg";var _=a.p+"static/media/clock-solid.23025348eaec720a2439930b37d677ee.svg",E=a(7596),J=a(4477),M=function(e){(0,i.Z)(a,e);var t=(0,l.Z)(a);function a(){return(0,c.Z)(this,a),t.apply(this,arguments)}return(0,s.Z)(a,[{key:"render",value:function(){var e=this.props,t=e.tag,a=e.timer,r=e.onData,n=e.onError,o=e.onFetch,c=e.children,s=e.retry,i=Array.isArray(c)?c:[c];return(0,D.jsx)(J.Z,{url:t,interval:a,promise:o,retryCount:s,onSuccess:r,onFailure:n,render:function(){return i}})}}]),a}(u.Component),P=function(e){var t=e.error,a=e.message,r=e.data,n=r.uuid,o=r.station,c=r.uptime,s=r.os,i="\u8fde\u63a5\u5931\u8d25",l="\u65e0\u6cd5\u8fde\u63a5\u5230\u670d\u52a1\u5668\uff0c\u8bf7\u5c1d\u8bd5\u5237\u65b0\u9875\u9762\u6216\u66f4\u6362\u7f51\u7edc";return t||(i="\u8fde\u63a5\u6210\u529f\uff1a".concat(o),l="".concat(a,"\n\n                \u670d\u52a1\u5668\u5728\u7ebf\u65f6\u957f ").concat(c," \u79d2\n\n                \u670d\u52a1\u5668\u91c7\u7528\u67b6\u6784 ").concat(s.arch,"/").concat(s.os,"\n\n                UUID\uff1a").concat(n,"\n")),{type:t?"error":"success",label:i,text:l}},R=a(1880),T=function(e,t){for(var a=0,r=["messages","errors","pushed","failures","queued","offset"];a<r.length;a++){var n=r[a],o=t.data.status;(0,R.Z)(e,"[tag:".concat(n,"]>value"),o[n])}return e},B=function(e,t){var a=t.data.location;return(0,r.Z)((0,r.Z)({},e),{},{area:(0,r.Z)((0,r.Z)({},e.area),{},{text:"\u6d4b\u7ad9\u7ecf\u5ea6\uff1a".concat(a.longitude," \xb0\n\n                \u6d4b\u7ad9\u7eac\u5ea6\uff1a").concat(a.latitude," \xb0\n\n                \u6d4b\u7ad9\u6d77\u62d4\uff1a").concat(a.altitude," m")}),instance:(0,r.Z)((0,r.Z)({},e.instance),{},{center:[a.latitude,a.longitude],marker:[a.latitude,a.longitude]})})},G=a(6694),H=function(e,t,a){for(var r=function(){var r,c,s=o[n],i=t.data[s].percent,l=[Date.now(),i],u=null===(r=e.find((function(e){return e.tag===s})))||void 0===r||null===(c=r.chart.series)||void 0===c?void 0:c.data,d=(0,G.Z)(u,l,a);(0,R.Z)(e,"[tag:".concat(s,"]>area>text"),"\u5f53\u524d\u5360\u7528\u7387\uff1a".concat(i.toFixed(2),"%")),(0,R.Z)(e,"[tag:".concat(s,"]>chart>series>data"),d)},n=0,o=["cpu","memory"];n<o.length;n++)r();return e},K=function(e){(0,i.Z)(a,e);var t=(0,l.Z)(a);function a(e){var r;return(0,c.Z)(this,a),(r=t.call(this,e)).handleFetch=function(){var e=(0,o.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,E.Z)({tag:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.handleData=function(e){var t=e.error;if(!e.data)return!1;var a=P(e);if(!t){var n=B(r.state.map,e),o=T(r.state.labels,e),c=H(r.state.areas,e,120);return r.setState({banner:a,labels:o,areas:c,map:n}),!0}return r.setState({banner:a}),!1},r.state={banner:{type:"warning",label:"\u6b63\u5728\u8fde\u63a5\u670d\u52a1\u5668",text:"\u8bf7\u7a0d\u7b49..."},labels:[{tag:"messages",label:"\u5df2\u89e3\u7801\u8baf\u606f\u91cf",value:"0",unit:"\u6761",icon:S,color:!0},{tag:"errors",label:"\u5e27\u9519\u8bef\u8baf\u606f\u91cf",value:"0",unit:"\u6761",icon:U,color:!0},{tag:"pushed",label:"\u5df2\u63a8\u9001\u8baf\u606f\u91cf",value:"0",unit:"\u6761",icon:I,color:!0},{tag:"failures",label:"\u63a8\u9001\u5931\u8d25\u8baf\u606f\u91cf",value:"0",unit:"\u6761",icon:W,color:!0},{tag:"queued",label:"\u7b49\u5f85\u63a8\u9001\u8baf\u606f\u91cf",value:"0",unit:"\u6761",icon:q,color:!0},{tag:"offset",label:"\u7cfb\u7edf\u65f6\u95f4\u504f\u79fb\u91cf",value:"0",unit:"\u79d2",icon:_,color:!0}],areas:[{tag:"cpu",area:{label:"CPU \u5360\u7528\u7387",text:"\u5f53\u524d\u5360\u7528\u7387\uff1a\u6b63\u5728\u83b7\u53d6\u4e2d"},chart:{backgroundColor:"#22c55e",lineWidth:5,height:250,series:{type:"line",color:"#fff",data:[]}}},{tag:"memory",area:{label:"RAM \u5360\u7528\u7387",text:"\u5f53\u524d\u5360\u7528\u7387\uff1a\u6b63\u5728\u83b7\u53d6\u4e2d"},chart:{backgroundColor:"#06b6d4",lineWidth:5,height:250,series:{type:"line",color:"#fff",data:[]}}}],map:{area:{label:"\u6d4b\u7ad9\u6240\u5728\u4f4d\u7f6e",text:"\u6b63\u5728\u52a0\u8f7d\u4f4d\u7f6e\u8d44\u8baf"},instance:{className:"h-[400px]",zoom:3,minZoom:3,maxZoom:7,flyTo:!0,marker:[0,0],center:[33,106],tile:"/tiles/{z}/{x}/{y}/tile.webp"}}},r}return(0,s.Z)(a,[{key:"render",value:function(){var e=this.state,t=e.banner,a=e.labels,n=e.areas,o=this.state.map,c=o.area,s=o.instance;return(0,D.jsxs)(x.Z,{children:[(0,D.jsx)(d.Z,{}),(0,D.jsx)(f.Z,{}),(0,D.jsxs)(h.Z,{children:[(0,D.jsx)(m.Z,{}),(0,D.jsxs)(M,{timer:1e3,tag:"station",onData:this.handleData,onFetch:this.handleFetch,children:[(0,D.jsx)(p.Z,(0,r.Z)({},t)),(0,D.jsx)(b.Z,{layout:"flex",children:a.map((function(e,t){return(0,D.jsx)(v.Z,(0,r.Z)((0,r.Z)({},e),{},{className:"md:w-1/2 lg:w-1/3"}),t)}))}),(0,D.jsx)(b.Z,{layout:"grid",children:n.map((function(e,t){var a=e.area,n=e.chart;return(0,D.jsx)(Z.Z,(0,r.Z)((0,r.Z)({},a),{},{children:(0,D.jsx)(g.Z,(0,r.Z)({},n))}),t)}))}),(0,D.jsx)(b.Z,{layout:"none",children:(0,D.jsx)(Z.Z,{label:c.label,text:c.text,children:(0,D.jsx)(F,(0,r.Z)({},s))})})]})]}),(0,D.jsx)(A.Z,{}),(0,D.jsx)(j.Z,{})]})}}]),a}(u.Component)}}]);